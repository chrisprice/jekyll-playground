---
author: Chris Price
tags: 
permalink: /2010/11/html5-charts-vs-flex-charts-vs-silverlight-charts-a-test-of-performance/index.html
layout: blog
---
<div class="entry"><p><em>This post follows on from the comparisons by <a href="{{ site.url }}/blog/colin/2010/11/visiblox-charts-vs-silverlight-toolkit-charts-a-test-of-performance-2/">Colin</a>, of two Silverlight chart libraries, and <a href="{{ site.url }}/blog/graham/2010/11/flex-charts-vs-silverlight-charts-a-test-of-performance/">Graham</a>, of Flex and Silverlight chart libraries. In this post I add an HTML5 chart library into the mix. The results show that the HTML5 Charts perform easily as well as the others in HTML5 browsers (Chrome, FireFox, Safari, Opera, IE9*).<br />
</em><br /><small>* Note this is predicted performance in IE9 as the library does not yet support it during its preview phase, <a href="http://code.google.com/p/closure-charts/wiki/IE9Preview">there is work being done on this</a>.</small></p><p>There’s been some interest in how Flex, HTML5 and Silverlight stack up against each other, and whether there’s any stand out reason to choose one technology over the others. To aid in this comparison I’ve reproduced the example from Colin and Grahams posts using an open-sourced charting library.</p><h3>Closure Charts</h3><p>The charting library is called Closure Charts, an open source project managed by Scott Logic aimed at producing fast and functional charts without requiring any browser plug-ins. It is built on top of the Closure Library framework and is fully annotated for use with the Closure Compiler. It has support for VML, SVG and canvas based rendering which means that it works on virtually all desktop web-browsers (including IE 6-8) and most smartphone browsers. For more information on the library visit the <a href="http://code.google.com/p/closure-charts/">website on Google Code</a> or take a look at <a href="http://closure-charts.appspot.com/">some of the examples</a>.</p><h3>HTML5</h3><p>I think at this point it would be helpful to share my personal definition of HTML5 as it’s a highly overloaded term in much the same way as web 2.0 was/is-</p><ul>
<li>A  next generation  JavaScript engine  (10/100x performance improvement on the previous generation)</li>
<li>New JavaScript APIs, e.g. WebWorkers, WebSockets, XDomain AJAX</li>
<li>New standards CSS3 (brings with it layout concepts, transitions etc…), SVG (persistent mode graphics)</li>
<li>New tags including Canvas (also Video, Audio but less relevant)</li>
</ul><p>The often quoted problem with HTML5 is the limited availability of the above features. Whilst is is true that support for most features is limited to the current versions of the non-IE browsers and the yet to be released IE 9, putting HTML5 support at approximatly 50% of desktop browsers and 60% of mobile browsers (<a href="http://gs.statcounter.com">statcounter.com</a>). It is not true to say that this means we can’t start using those features, and in many cases drag the legacy browsers along for the ride. Abstraction libraries make it possible to target many HTML5 features and be confident of them running on legacy browsers. I’d recommend watching <a href="http://www.infoq.com/presentations/HTML5-Today">this video</a>, for a very passionate and informative talk on this very topic. (thanks Matt!). </p><p>Unfortunately in this example we require functionality that is only provided by the canvas element, specifically Context2D.getImageData which allows the retrieval of pixel data from an image. For this reason the below example only works in browsers which support the canvas tag, so no IE 6-8 support. However, I think it’s fair to blame the example rather than the technology here, as I’m struggling to think of a genuine need for pixel data extraction in most circumstances.</p><h3>Implementation</h3><p>Here are the examples of the three different technologies -</p><table>
<tr>
<th style="text-align: center;">HTML5 Chart</th>
<th style="text-align: center;">Flex Chart</th>
<th style="text-align: center;"><a href="http://www.visiblox.com/">Visiblox Chart</a></th>
</tr>
<tr>
<td style="text-align: center;" id="html5example"></td>
<td style="text-align: center;">

<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="fm_FlexChartsPerformance_1587390285" class="flashmovie" width="280" height="380">
	<param name="movie" value="http://www.scottlogic.co.uk/blog/graham/wp-content/uploads/2010/11/FlexChartsPerformance.swf" />
	<!--[if !IE]>-->
	<object type="application/x-shockwave-flash" data="http://www.scottlogic.co.uk/blog/graham/wp-content/uploads/2010/11/FlexChartsPerformance.swf" name="fm_FlexChartsPerformance_1587390285" width="280" height="380">
	<!--<![endif]-->
		
	<!--[if !IE]>-->
	</object>
	<!--<![endif]-->
</object>
</td>
<td style="text-align: center;">
<object height="400" width="300" type="application/x-silverlight-2" data="data:application/x-silverlight,"><param value="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2010/11/HistogramVisiblox.xap" name="source" /><a style="text-decoration: none;" href="http://go.microsoft.com/fwlink/?LinkID=124807"><br /> <br />
<img style="border-style: none;" alt="Get Microsoft Silverlight" src="http://go.microsoft.com/fwlink/?LinkId=108181" /><br /> <br />
</a><br /> <br />
</object>
</td>
</tr>
</table><p><small>Image credit to<a href="http://www.flickr.com/photos/clevergrrl/218312595/sizes/s/in/photostream/">Clevergrrl</a></small></p><style>
	#imageDataComponentRootElement {
		width: 280px;
padding: 10px;
	}
	#chartcanvas {
		height: 180px;
		border: 1px solid #ededed;
	}
</style><p><br />
</p><p>The example is implemented as a Closure Component, an interesting snippet is the mouse move code which is very similar to the Flex example -</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
	<span style="color: #009966; font-style: italic;">/** @type {goog.math.Coordinate} */</span>
	<span style="color: #003366; font-weight: bold;">var</span> canvasPos <span style="color: #339933;">=</span> goog.<span style="color: #660066;">style</span>.<span style="color: #660066;">getClientPosition</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">canvas</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
	<span style="color: #009966; font-style: italic;">/** @type {goog.math.Coordinate} */</span>
	<span style="color: #003366; font-weight: bold;">var</span> endPos <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">new</span> goog.<span style="color: #660066;">math</span>.<span style="color: #660066;">Coordinate</span><span style="color: #009900;">(</span>e.<span style="color: #660066;">clientX</span> <span style="color: #339933;">-</span> canvasPos.<span style="color: #660066;">x</span><span style="color: #339933;">,</span> e.<span style="color: #660066;">clientY</span> <span style="color: #339933;">-</span> canvasPos.<span style="color: #660066;">y</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
	<span style="color: #006600; font-style: italic;">// compute length of line</span>
	<span style="color: #009966; font-style: italic;">/** @type {number} */</span>
	<span style="color: #003366; font-weight: bold;">var</span> length <span style="color: #339933;">=</span> Math.<span style="color: #660066;">floor</span><span style="color: #009900;">(</span>Math.<span style="color: #660066;">sqrt</span><span style="color: #009900;">(</span>Math.<span style="color: #660066;">pow</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">x</span> <span style="color: #339933;">-</span> endPos.<span style="color: #660066;">x</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">2</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
				   Math.<span style="color: #660066;">pow</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">y</span> <span style="color: #339933;">-</span> endPos.<span style="color: #660066;">y</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">2</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
	<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>length <span style="color: #339933;">&gt;</span> <span style="color: #CC0000;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
		<span style="color: #006600; font-style: italic;">// draw the visible line</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">ctx</span>.<span style="color: #660066;">drawImage</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">image</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">0</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">0</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">ctx</span>.<span style="color: #660066;">beginPath</span><span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">ctx</span>.<span style="color: #660066;">moveTo</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">x</span><span style="color: #339933;">,</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">y</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">ctx</span>.<span style="color: #660066;">lineTo</span><span style="color: #009900;">(</span>endPos.<span style="color: #660066;">x</span><span style="color: #339933;">,</span> endPos.<span style="color: #660066;">y</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">ctx</span>.<span style="color: #660066;">closePath</span><span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">ctx</span>.<span style="color: #660066;">stroke</span><span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
		<span style="color: #006600; font-style: italic;">// rebuild the chart data</span>
		goog.<span style="color: #660066;">array</span>.<span style="color: #660066;">clear</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">seriesRed</span>.<span style="color: #660066;">points</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		goog.<span style="color: #660066;">array</span>.<span style="color: #660066;">clear</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">seriesGreen</span>.<span style="color: #660066;">points</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		goog.<span style="color: #660066;">array</span>.<span style="color: #660066;">clear</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">seriesBlue</span>.<span style="color: #660066;">points</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">for</span> <span style="color: #009900;">(</span><span style="color: #003366; font-weight: bold;">var</span> i <span style="color: #339933;">=</span> <span style="color: #CC0000;">0</span><span style="color: #339933;">;</span> i <span style="color: #339933;">&lt;</span> lineLength<span style="color: #339933;">;</span> i<span style="color: #339933;">++</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
		<span style="color: #009966; font-style: italic;">/** @type {number} */</span>
		<span style="color: #003366; font-weight: bold;">var</span> xIndex <span style="color: #339933;">=</span> Math.<span style="color: #660066;">floor</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">x</span> <span style="color: #339933;">+</span> <span style="color: #009900;">(</span>endPos.<span style="color: #660066;">x</span> <span style="color: #339933;">-</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">x</span><span style="color: #009900;">)</span> <span style="color: #339933;">*</span> i <span style="color: #339933;">/</span> lineLength<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #009966; font-style: italic;">/** @type {number} */</span>
		<span style="color: #003366; font-weight: bold;">var</span> yIndex <span style="color: #339933;">=</span> Math.<span style="color: #660066;">floor</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">y</span> <span style="color: #339933;">+</span> <span style="color: #009900;">(</span>endPos.<span style="color: #660066;">y</span> <span style="color: #339933;">-</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">startPos</span>.<span style="color: #660066;">y</span><span style="color: #009900;">)</span> <span style="color: #339933;">*</span> i <span style="color: #339933;">/</span> lineLength<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #009966; font-style: italic;">/** @type {number} */</span>
		<span style="color: #003366; font-weight: bold;">var</span> index <span style="color: #339933;">=</span> yIndex <span style="color: #339933;">*</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">size</span>.<span style="color: #660066;">width</span> <span style="color: #339933;">*</span> <span style="color: #CC0000;">4</span> <span style="color: #339933;">+</span> xIndex <span style="color: #339933;">*</span> <span style="color: #CC0000;">4</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">seriesRed</span>.<span style="color: #660066;">points</span>.<span style="color: #660066;">push</span><span style="color: #009900;">(</span><span style="color: #009900;">[</span>i<span style="color: #339933;">,</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">canvasPixelArray</span><span style="color: #009900;">[</span>index<span style="color: #009900;">]</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">seriesGreen</span>.<span style="color: #660066;">points</span>.<span style="color: #660066;">push</span><span style="color: #009900;">(</span><span style="color: #009900;">[</span>i<span style="color: #339933;">,</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">canvasPixelArray</span><span style="color: #009900;">[</span>index <span style="color: #339933;">+</span> <span style="color: #CC0000;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">seriesBlue</span>.<span style="color: #660066;">points</span>.<span style="color: #660066;">push</span><span style="color: #009900;">(</span><span style="color: #009900;">[</span>i<span style="color: #339933;">,</span><span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">canvasPixelArray</span><span style="color: #009900;">[</span>index <span style="color: #339933;">+</span> <span style="color: #CC0000;">2</span><span style="color: #009900;">]</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
		<span style="color: #009900;">}</span>
&nbsp;
		<span style="color: #006600; font-style: italic;">// update the chart display</span>
		<span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">chart</span>.<span style="color: #660066;">redraw</span><span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
	<span style="color: #009900;">}</span>
<span style="color: #009900;">}</span></pre></div></div><h3>Conclusion</h3><p>I’m able to conclude in much the same way as Graham, from the above examples it is apparent that there is little, if anything, to differentiate their relative performance once loaded. Furthermore, it would be fair to say that the outright technology choice of HTML5, Flex or Silverlight has not differentiated these examples. Rather, the choice of charting library in either technology is far more significant with respect to performance.</p><p>However, I think a distinction can be drawn in terms of loading time. The HTML5 example initialising with the rest of the page, whereas both the plug-in based approaches have a noticeable loading lag, both network before they are cached, and plug-in initialisation once cached. Here, the HTML5 version has two clear advantages -</p><ul>
<li>The example itself weighs in at only ~65kB (including image, transferred size) versus ~225kB for Flash and ~285kB for Silverlight.</li>
<li>There is no plug-in to initialise, a very big advantage of targeting the “native runtime”.</li>
</ul><p>So in conclusion, if loading performance, cuteness or mobile support are crucial to your component/application then HTML5 is a very strong contender.</p><p>Chris</p></div>