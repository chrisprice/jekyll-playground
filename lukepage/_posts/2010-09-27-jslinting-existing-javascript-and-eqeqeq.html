---
author: Luke Page
tags: 
permalink: /2010/09/jslinting-existing-javascript-and-eqeqeq/index.html
layout: blog
---
<div class="entry"><h3>Introduction</h3><p>As I’ve previously mentioned JSLint is a tool by Douglas Crockford that checks code against various rules in order to find code that could potentially be buggy or ambiguous. One such rule is that users should not use two equals (==) but should use three (===). There is an option that turns on whether it complains when comparing variables (x==y) but JSLint will always complain when comparing against system constants like “”, null, undefined and 0. This because when using two equals the values are coerced between types, so we get the following surprising results (all of the if’s are true).</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #003366; font-weight: bold;">var</span> result <span style="color: #339933;">=</span> <span style="color: #3366CC;">""</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>undefined <span style="color: #339933;">==</span> <span style="color: #003366; font-weight: bold;">null</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #3366CC;">""</span> <span style="color: #339933;">==</span> <span style="color: #003366; font-weight: bold;">false</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #CC0000;">0</span> <span style="color: #339933;">==</span> <span style="color: #003366; font-weight: bold;">false</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #CC0000;">0</span> <span style="color: #339933;">==</span> <span style="color: #3366CC;">"0"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>undefined <span style="color: #339933;">!=</span> <span style="color: #003366; font-weight: bold;">false</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #339933;">!</span>undefined <span style="color: #339933;">==</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066;">alert</span><span style="color: #009900;">(</span><span style="color: #3366CC;">"result is "</span><span style="color: #339933;">+</span>result<span style="color: #009900;">)</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">// true,true,true,true,true,true</span></pre></div></div><p>JSLint will give errors for comparing to true, false, “”, 0, null and undefined if we use coercion. This is to stop the programmer being caught out when they may not remember all the rules. Compare the results when we add in extra equals signs…</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #003366; font-weight: bold;">var</span> result <span style="color: #339933;">=</span> <span style="color: #3366CC;">""</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>undefined <span style="color: #339933;">===</span> <span style="color: #003366; font-weight: bold;">null</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #3366CC;">""</span> <span style="color: #339933;">===</span> <span style="color: #003366; font-weight: bold;">false</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #CC0000;">0</span> <span style="color: #339933;">===</span> <span style="color: #003366; font-weight: bold;">false</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #CC0000;">0</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"0"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>undefined <span style="color: #339933;">!==</span> <span style="color: #003366; font-weight: bold;">false</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false,"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #339933;">!</span>undefined <span style="color: #339933;">===</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"true"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    result <span style="color: #339933;">+=</span> <span style="color: #3366CC;">"false"</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066;">alert</span><span style="color: #009900;">(</span><span style="color: #3366CC;">"result is "</span><span style="color: #339933;">+</span>result<span style="color: #009900;">)</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">// false,false,false,false,true,true</span></pre></div></div><p>Which is at least easier to predict. So the question I want to ask in this blog post is not to go into the intricacies of JavaScript type coercion but to look at what we should consider when we are making old code pass JSLint.</p><h3>Situations in non lint passing code</h3><p>Perhaps the most common situation to come across in old code is</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>x <span style="color: #339933;">!=</span> <span style="color: #003366; font-weight: bold;">null</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
   <span style="color: #006600; font-style: italic;">// do something</span>
<span style="color: #009900;">}</span></pre></div></div><p>Now to make this pass, we could just convert it to what this actually means.</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>x <span style="color: #339933;">!==</span> <span style="color: #003366; font-weight: bold;">null</span> <span style="color: #339933;">&amp;&amp;</span> x <span style="color: #339933;">!==</span> undefined<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
   <span style="color: #006600; font-style: italic;">// do something</span>
<span style="color: #009900;">}</span></pre></div></div><p>Which is pretty ugly. But we can take advantage of the fact the following</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span><span style="color: #009900;">{</span><span style="color: #009900;">}</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//true</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span><span style="color: #009900;">[</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//true</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #3366CC;">"string"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//true</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #CC0000;">45</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//true</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #003366; font-weight: bold;">null</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//false</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>undefined<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//false</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #3366CC;">""</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//false</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #CC0000;">0</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #006600; font-style: italic;">//false</span>
<span style="color: #009900;">}</span></pre></div></div><p>All objects, arrays, strings that are not empty, numbers that are not 0 all evaluate to true when we evaluate them (despite them not coercing, so [] == true is false).</p><p>So going back to our original code, we can first ask is 0, false or “” a truthy value for the variable? If the variable is an array or object, we immediately know it is invalid to be these values, so we can instead make our legacy code pass JSLint by just doing an if.</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #006600; font-style: italic;">// x is an array or object so we don't need to test against </span>
<span style="color: #006600; font-style: italic;">// anything as this will only pass if it is initialised</span>
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
   <span style="color: #006600; font-style: italic;">// do something</span>
<span style="color: #009900;">}</span></pre></div></div><p>If the variable is a Number, String or Boolean though we need to be very careful. Is it obvious if “”, 0 or false are invalid values? It is probably safer to go back to comparing against null and undefined.</p><p>You might think that for numbers we could use isNaN – you’d be wrong.. isNaN(null) is true. Casting null to a number produces 0. So how else can we determine if something is a number, a string or a boolean and not null or undefined?</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>x <span style="color: #339933;">!==</span> <span style="color: #003366; font-weight: bold;">null</span> <span style="color: #339933;">&amp;&amp;</span> x<span style="color: #339933;">!==</span>undefined<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
   <span style="color: #006600; font-style: italic;">// do something</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span>x <span style="color: #339933;">&amp;&amp;</span> x <span style="color: #339933;">!==</span> <span style="color: #CC0000;">0</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
   <span style="color: #006600; font-style: italic;">// do something</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"string"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
   <span style="color: #006600; font-style: italic;">// do something</span>
<span style="color: #009900;">}</span></pre></div></div><p>I like the last one best, because it is really specific about what it is testing for, but what I don’t like is that it has a string constant and it is quite open to programmer mistakes…</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> Number<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>  <span style="color: #006600; font-style: italic;">// Very bad code, do not copy</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"Number"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>  <span style="color: #006600; font-style: italic;">// Very bad code, do not copy</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"int"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>  <span style="color: #006600; font-style: italic;">// Very bad code, do not copy</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #000066; font-weight: bold;">if</span>  <span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"number"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
   <span style="color: #006600; font-style: italic;">// could still be wrong if we want "3" to pass</span>
<span style="color: #009900;">}</span></pre></div></div><p>So, what about having functions to work out if something is a number, string, bool? I wouldn’t recommend it in speed sensitive code, but the following code would make your if clearer. If you were using the Google Closure compiler though, you might find that it automatically inlined the code from the functions and relied on gzip to reduce the extra size of those string literals.</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #000066; font-weight: bold;">is</span> <span style="color: #339933;">=</span> <span style="color: #009900;">{</span>
  number <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">(</span>number<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>number<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"number"</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span><span style="color: #339933;">,</span>
&nbsp;
  numberCoercible <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">(</span>number<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>number<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"number"</span> <span style="color: #339933;">||</span> number <span style="color: #339933;">==</span> Number<span style="color: #009900;">(</span>number<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span><span style="color: #339933;">,</span>
&nbsp;
  string <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">(</span>string<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>string<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"string"</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span><span style="color: #339933;">,</span>
&nbsp;
  stringCoercible <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">(</span>string<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>string<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"string"</span> <span style="color: #339933;">||</span> string <span style="color: #339933;">==</span> String<span style="color: #009900;">(</span>string<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span><span style="color: #339933;">,</span>
&nbsp;
  boolean <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">(</span>boolean<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>boolean<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"boolean"</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span><span style="color: #339933;">,</span>
&nbsp;
  booleanCoercible <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">(</span>boolean<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">typeof</span><span style="color: #009900;">(</span>boolean<span style="color: #009900;">)</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">"boolean"</span> <span style="color: #339933;">||</span> boolean <span style="color: #339933;">==</span> Boolean<span style="color: #009900;">(</span>boolean<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span>
<span style="color: #009900;">}</span><span style="color: #339933;">;</span></pre></div></div><p>I decided to create separate functions for the coercing to make it more obvious what it is checking for at each if. They don’t call each other so you only have one method call per if and so there is no way a developer can pass something like isBoolean(bool, true) to signify they want coercion – it might be worse than the original in terms of being clear in meaning. The coercion test is done by comparing the value passed into the type cast with the value itself. For example…</p><ul>
<li>String(null) is “null” which is not == to null.</li>
<li>Number(null) is 0 which is not == to null.</li>
<li>Number(undefined) is NaN which is not == to undefined</li>
<li>Bool(2) is true which is not == to 2</li>
<li>Bool(undefined) is false which is not == to undefined</li>
<li>etc.</li>
</ul><p>However, we do get some slightly strange results, like “” being coercible to false and [] being coercible to string (["1"] == “1″ and ["2","3"] == “2,3″). I would think that the use case for using string and boolean coercion would be quite small and possibly best left off the if class. We do at least get false if null or undefined are passed into these functions.</p><h3>Conclusion</h3><p>Whether you use the global functions or not (I haven’t decided myself whether its worth the payout performance and size layout when not using Google Closure) I hope this post underlines that == vs === is difficult and care needs to be taken in writing and changing code when testing for null or undefined.</p></div>