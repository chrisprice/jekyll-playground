---
author: Luke Page
tags: 
permalink: /2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/index.html
layout: blog
---
<div class="entry"><h3>Introduction</h3><p>This post is inspired by the news that text overflow ellipsis capabilities have reached the mozilla code base trunk (see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=312156#c305">bug</a>). This should be in Firefox 7, which thanks to the new 6 week release cycles, won’t be long.</p><p>So, what is text overflow and why do I care? Since I started web application development 5 years ago, there has always been the need for a grid or table of some sort. In every case the end user wanted to see fixed width columns, fixed height rows and have data that overflows the cell content. However, it isn’t particularly user friendly to have…</p><p>
<table style="table-layout: fixed; width: 60px; border: black 1px solid;">
<tr>
<td style="border: black 1px solid; width: 60px; overflow: hidden; white-space: nowrap;">Lots of data, data, data</td>
</tr>
</table>
<p>The text here is “Lots of data, data, data” but if it is cut off just before the first comma, the user can’t see that there is more in the cell contents than they expect. With text overflow, we get this instead..</p>
<p>
<table style="table-layout: fixed; width: 60px; border: black 1px solid;">
<tr>
<td style="width: 60px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; border: black 1px solid;">Lots of data, data, data</td>
</tr>
</table>
<p>If you are an IE7 user (more on that later) or Firefox user, the rest of us are seeing… <img src="http://www.scottlogic.co.uk/wp-content/uploads/2011/06/text-overflow.png" alt="" title="text-overflow" width="72" height="25" style="display: inline-block;" /></p>
<h3>IE7 Workaround</h3>
<p>This nice functionality does not work on IE7, because in IE7 (and IE6) text overflow does not work on table cells. the HTML for the above looks like this..</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family: monospace;">&lt;table style="table-layout: fixed; width: 60px;border: black 1px solid;"&gt;
  &lt;tr&gt;
    &lt;td style="width: 60px; overflow: hidden; white-space:nowrap;text-overflow: ellipsis;border: black 1px solid;"&gt;
      Lots of data, data, data
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</pre></div></div>

<p>but to get it to work in IE7 we need to introduce a div that has the overflow set on it.</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family: monospace;">&lt;table style="table-layout: fixed; width: 60px;border: black 1px solid;"&gt;
  &lt;tr&gt;
    &lt;td style="width: 60px; border: black 1px solid;"&gt;
      &lt;div style="width:100%;overflow: hidden;text-overflow: ellipsis;white-space:nowrap;height:1em; "&gt;
         Lots of data, data, data
      &lt;/div&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</pre></div></div>

<table style="table-layout: fixed; width: 60px; border: black 1px solid;">
<tr>
<td style="width: 60px; white-space: nowrap; border: black 1px solid;">
<div style="width: 100%; overflow: hidden; text-overflow: ellipsis;">Lots of data, data, data</div>
</td>
</tr>
</table>
<h3>Background Colours</h3>
<p>I was recently setting some background colours on text that was being clipped with an ellipsis added and found that although the text was removed, the background remains. E.g.</p>
<p>No ellipsis…</p>
<div style="overflow: hidden; width: 40px; white-space: nowrap; border: black 1px solid;"><span style="background-color: red;">N</span><span style="background-color: green; color: white;">e</span><span style="background-color: blue; color: white;">w</span><span style="background-color: yellow;"> </span><span style="background-color: pink;">Z</span><span style="background-color: brown; color: white;">e</span><span style="background-color: red;">a</span><span style="background-color: green; color: white;">l</span><span style="background-color: blue; color: white;">a</span><span style="background-color: yellow;">n</span><span style="background-color: pink;">d</span></div>
<p>Ellipsis…</p>
<div style="overflow: hidden; text-overflow: ellipsis; width: 40px; white-space: nowrap; border: black 1px solid;"><span style="background-color: red;">N</span><span style="background-color: green; color: white;">e</span><span style="background-color: blue; color: white;">w</span><span style="background-color: yellow;"> </span><span style="background-color: pink;">Z</span><span style="background-color: brown; color: white;">e</span><span style="background-color: red;">a</span><span style="background-color: green; color: white;">l</span><span style="background-color: blue; color: white;">a</span><span style="background-color: yellow;">n</span><span style="background-color: pink;">d</span></div>
<p>One issue with this is that the text color is not inherited from the character that is obscured, so you can see the last dot is kept black and thus obscured. So, maybe that was a contrived example, but what If I am trying to highlight a word and that word is just out of view, then</p>
<div style="overflow: hidden; text-overflow: ellipsis; width: 40px; white-space: nowrap; border: black 1px solid;">New Z<span style="background-color: red;">el</span>land</div>
<p>it looks wrong. The explanation from the spec is that text overflow will…<br />
<a href="http://dev.w3.org/csswg/css3-ui/#text-overflow">“Hide characters and atomic inline-level elements at the end edge of the line as necessary to fit the ellipsis.”</a></p>
<p>and an atomic element is one which is not inline – so basically just inline-block elements that appear after the text that is being truncated. </p>
<p>But because text-overflow works on inline text and not elements, even if we wrap every character in an individual inline block span, we just remove the effect, not the background colour.</p>
<div style="overflow: hidden; width: 40px; white-space: nowrap; border: black 1px solid;"><span style="background-color: red; display: inline-block;">N</span><span style="background-color: green; color: white; display: inline-block;">e</span><span style="background-color: blue; color: white; display: inline-block;">w</span><span style="background-color: yellow; display: inline-block;"> </span><span style="background-color: pink; display: inline-block;">Z</span><span style="background-color: brown; color: white; display: inline-block;">e</span><span style="background-color: red; display: inline-block;">a</span><span style="background-color: green; color: white; display: inline-block;">l</span><span style="background-color: blue; color: white; display: inline-block;">a</span><span style="background-color: yellow; display: inline-block;">n</span><span style="background-color: pink; display: inline-block;">d</span></div>
<h3>Conclusion</h3>
<p>Regardless however with my qualms over the exact implementation, this is a great CSS feature now available across all the major browsers. Hurray!</p>
<p>More information is available on the <a href="https://developer.mozilla.org/en/CSS/text-overflow">Mozilla information page</a>.</p>
                        <hr />
            <p>This entry was posted on Friday, June 24th, 2011 and is filed under <a href="{{ site.url }}/category/blog/" title="View all posts in Blog" rel="category tag">Blog</a>.</p>
            <p>You can follow any responses to this entry through the <a href="{{ site.url }}/2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/feed/">RSS 2.0</a> feed.
                                    You can <a href="#respond">leave a response</a>, or <a href="{{ site.url }}/2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/trackback/" rel="trackback">trackback</a> from your own site
                .
                                        <hr />
            
<!-- You can start editing here. -->

	<h3 id="comments">2 Responses to “Text Overflow Ellipsis – FF, IE7 and background colours”</h3>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>

	<ol class="commentlist">
			<li class="comment even thread-even depth-1 parent" id="comment-45804">
				<div id="div-comment-45804" class="comment-body">
				<div class="comment-author vcard">
				<cite class="fn">unhappywebdev</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="{{ site.url }}/2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/#comment-45804">
			July 19, 2012 at 9:26 am</a>		</div>

		<p>Hi, I tried just displaying this web page whith IE7… and your demo doesn’t work.<br />
I tried myself… and in fact your solution doesn’t work at all !!!</p>

		<div class="reply">
		<a class="comment-reply-link" href="/2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/?replytocom=45804#respond" onclick="return addComment.moveForm(&quot;div-comment-45804&quot;, &quot;45804&quot;, &quot;respond&quot;, &quot;121041&quot;)">Reply</a>		</div>
				</div>
		<ul class="children">
		<li class="comment byuser comment-author-luke-page bypostauthor odd alt depth-2" id="comment-65210">
				<div id="div-comment-65210" class="comment-body">
				<div class="comment-author vcard">
				<cite class="fn">Luke Page</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="{{ site.url }}/2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/#comment-65210">
			November 2, 2012 at 8:12 am</a>		</div>

		<p>Oops, I did miss a style out of the example. I have updated it now.</p>

		<div class="reply">
		<a class="comment-reply-link" href="/2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/?replytocom=65210#respond" onclick="return addComment.moveForm(&quot;div-comment-65210&quot;, &quot;65210&quot;, &quot;respond&quot;, &quot;121041&quot;)">Reply</a>		</div>
				</div>
		</li>
</ul>
</li>
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
 


<div id="respond">

<h3>Leave a Reply</h3>

<div id="cancel-comment-reply">
	<small><a rel="nofollow" id="cancel-comment-reply-link" href="/2011/06/text-overflow-ellipsis-ff-ie7-and-background-colours/#respond" style="display: none;">Click here to cancel reply.</a></small>
</div>


<form action="http://www.scottlogic.co.uk/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" aria-required="true" />
<label for="author"><small>Name (required)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required="true" />
<label for="email"><small>Mail (will not be published) (required)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url"><small>Website</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; &lt;pre lang=&quot;&quot; line=&quot;&quot; escaped=&quot;&quot; highlight=&quot;&quot;&gt; </code></small></p>-->

<p><textarea name="comment" id="comment" cols="58" rows="10" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="121041" id="comment_post_ID" />
<input type="hidden" name="comment_parent" id="comment_parent" value="0" />
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="6d609fad53" /></p>
</form>

</div>

                    </p></p></p></div>