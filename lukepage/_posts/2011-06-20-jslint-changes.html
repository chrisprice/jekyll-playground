---
author: Luke Page
tags: 
permalink: /2011/06/jslint-changes/index.html
layout: blog
---
<div class="entry"><p>At the weekend I released a new version of my <a href="http://jslint4vs2010.codeplex.com/">JSLint for visual studio plugin</a>. There have been some big changes made by Douglas Crockford in the last month, so given the lack of an official JSLint blog (most major updates are announced by Douglas Crockford on the <a href="http://tech.groups.yahoo.com/group/jslint_com/">mailing list</a>) I will go over some of the recent changes.</p><h3>Polarity</h3><p>It has been somewhat confusing that JSLint options are sometimes written as “Tolerate xx” and sometimes as “Disallow xx”. Douglas has changed all the options to now be in the tolerate form. Simply put, if all the options are false then JSLint is not tolerating anything and is being as strict as it can be.</p><p>In the VS extension these options are now settable separately between the different linters.</p><h3>eqeq(eq) is back</h3><p>After 5-6 months, Douglas has decided the option to tolerate == and != will now come back to JSLint as eqeq (previously it was eqeqeq and had a reversed meaning). I felt strongly it should come back so that linting pre-existing code did not require the difficult work of converting == and !=, so I am glad it is back, but I also strongly urge people not to turn it on if they are writing new files. I suspect Douglas has allowed it because of the new confusion option…</p><h3>Confusion</h3><p>JSLint now attempts to type local variables and warn when they are used inconsistently. For example…</p><div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family: monospace;"><span style="color: #003366; font-weight: bold;">var</span> a <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">(</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
  <span style="color: #003366; font-weight: bold;">var</span> b <span style="color: #339933;">=</span> <span style="color: #CC0000;">0</span><span style="color: #339933;">;</span>
  b <span style="color: #339933;">=</span> <span style="color: #3366CC;">"string"</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">// error - number confused with string</span>
  <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>b<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #CC0000;">1</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">{</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #3366CC;">"string"</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">// error - number confused with string (returning different types)</span>
  <span style="color: #009900;">}</span>
<span style="color: #009900;">}</span><span style="color: #339933;">;</span></pre></div></div><p>The support doesn’t seem fully worked out yet (people are still raising some bugs), but it looks to be a great addition to JSLint.</p><h3>Other changes…</h3><p>In the “Dangling _” option, this previously just warned about fields ending in “_”, but now it also warns for fields beginning with “_”.</p><p>In the code “a ? a : b” we now get a suggestion that this be re-written as “a || b”. This is in my opinion a great change that spreads the use of the || operator, teaching people that it just returns the first truthy option.</p><h3> JSHint </h3><p>I’ve previously mentioned that I wish JSHint were forked and kept merged with JSLint so we could get the benefits of more control over warnings but keep new features. However it is not and consequently the changes in JSHint are less extensive..</p><ul>
<li>support for dojo global defines</li>
<li>a new option for whether unescaped dash’s should be allowed in regex’s</li>
<li>a new option for allowing href = “javascript:…” assignments</li>
</ul></div>