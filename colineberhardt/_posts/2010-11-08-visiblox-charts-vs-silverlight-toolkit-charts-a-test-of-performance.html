---
author: Colin Eberhardt
tags: charts, performance, visiblox
permalink: /blog/colin/2010/11/visiblox-charts-vs-silverlight-toolkit-charts-a-test-of-performance-2/index.html
layout: colineberhardt-blog
---
<div class="entry"><div class="topsy_widget_data topsy_theme_light-green" style="float: right; margin-left: 0.75em; background: url(data:,%7B%20%22url%22%3A%20%22http%253A%252F%252Fwww.scottlogic.co.uk%252Fblog%252Fcolin%252F2010%252F11%252Fvisiblox-charts-vs-silverlight-toolkit-charts-a-test-of-performance-2%252F%22%2C%20%22style%22%3A%20%22big%22%2C%20%22title%22%3A%20%22Visiblox%20Charts%20vs.%20Silverlight%20Toolkit%20Charts%20-%20a%20test%20of%20Performance%20%23%22%20%7D);"></div><p><em>This blog post compares the performance of the Visiblox and Silverlight Toolkit charts using a simple image processing tool to test and illustrate their differences in performance. The results show that the Visiblox charts are approximately 50 – 100 times faster that the Silverlight Toolkit charts.</em></p><div style="background-color: #ddd; margin: 10px; padding: 20px;">
<b>UPDATE:</b> I have published a more up-to-date and <a href="{{ site.url }}/blog/colin/2012/04/wpf-charting-performance-comparisons-the-battle-continues/">extensive test of WPF charting components in a more recent blog post</a>. This new test looks at how raster-graphics can be used to significantly enhance performance.
</div><p>I was recently asked by my friends at <a href="http://www.visiblox.com/">Visiblox</a> to test out the latest release of their charts for WPF and Silverlight. One of the key features of the Visiblox charts is their performance; they have been designed to both render and update rapidly in response to changes in the underlying data. I decided to put their latest release to the test in a head-to-head against the Silverlight Toolkit charts.</p><p>Microsoft announced the release of the Silverlight Toolkit charts in late 2008 and have since released a number of updates, some of which have <a href="http://blogs.msdn.com/b/delay/archive/2009/03/19/silverlight-charting-is-faster-and-better-than-ever-silverlight-toolkit-march-09-release-now-available.aspx">focussed on performance</a>. I would anticipate that the relatively mature Silverlight Toolkit charts are probably most developer’s first choice when they need to display data graphically within their application.</p><p>Before we get into the details of my investigation, here are the two applications working side-by-side, one using the Visiblox chart and the other using the Toolkit charts. Click and drag a line across the image to plot the RGB pixel intensities along the line in the chart above. This is a reasonably tough challenge for the chart, with three series rendered of up to 400 points each. From the examples below you can see that the Visiblox charts are clearly faster.</p><table>
<tr>
<th style="text-align: center;">
Visiblox Chart
</th>
<th style="text-align: center;">
Silverlight Toolkit Chart
</th>
</tr>
<tr>
<td>
<div style="text-align: center;"><object width="300" height="430" data="data:application/x-silverlight," type="application/x-silverlight-2"><param name="source" value="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2010/11/HistogramVisiblox.xap" /><a href="http://go.microsoft.com/fwlink/?LinkID=124807" style="text-decoration: none;"> <img src="http://go.microsoft.com/fwlink/?LinkId=108181" alt="Get Microsoft Silverlight" style="border-style: none;" /></a></object></div>
</td>
<td>
<div style="text-align: center;"><object width="300" height="430" data="data:application/x-silverlight," type="application/x-silverlight-2"><param name="source" value="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2010/10/HistogramToolkit.xap" /><a href="http://go.microsoft.com/fwlink/?LinkID=124807" style="text-decoration: none;"> <img src="http://go.microsoft.com/fwlink/?LinkId=108181" alt="Get Microsoft Silverlight" style="border-style: none;" /></a></object></div>
</td>
</tr>
</table><p><small>[Hare image used under CC licence from <a href="http://www.flickr.com/photos/heliocentric/2643028940/">flickr</a>, tortoise used royalty free from <a href="http://www.sxc.hu/photo/695928">stock.xchng</a>]</small></p><p>I have had quite a bit of experience with the Silverlight Toolkit in the past and have written a few blog posts which detail how to <a href="{{ site.url }}/blog/colin/2009/03/adding-a-location-crosshair-to-silverlight-charts-again/">add interactivity to the charts</a>. The early releases were pretty slow, due to the large number of ‘Control’ instances that the chart constructs, (there are un-official guidelines that you should limit the number of control instances to a few hundred for WPF &amp; Silverlight). However, subsequent releases were quite a bit faster. David Anson also published a number of very useful hints and tips on <a href="http://blogs.msdn.com/b/delay/archive/2010/01/13/i-feel-the-need-the-need-for-speed-seven-simple-performance-boosting-tweaks-for-common-silverlight-wpf-charting-scenarios.aspx">maximising chart performance</a> on his blog. I have followed all of David’s guidelines to provide a fair comparison.</p><p>The following sections will provide a little more detail regarding the implementation of this application and how it differs between the Visiblox and Toolkit versions.</p><h2>Visiblox Charts</h2><p>The markup for the above application is quite simple:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;StackPanel</span> <span style="color: #000066;">Orientation</span>=<span style="color: #ff0000;">"Vertical"</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"LayoutRoot"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Grid</span> <span style="color: #000066;">Height</span>=<span style="color: #ff0000;">"180"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
&nbsp;
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:Chart</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"chart"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">LegendVisibility</span>=<span style="color: #ff0000;">"Collapsed"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">Margin</span>=<span style="color: #ff0000;">"5,0,5,5"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:Chart.XAxis<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #808080; font-style: italic;">&lt;!-- a 'hidden' X axis --&gt;</span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:LinearAxis</span> <span style="color: #000066;">ShowAxis</span>=<span style="color: #ff0000;">"False"</span></span>
<span style="color: #009900;">                          <span style="color: #000066;">GridlineStyle</span>=<span style="color: #ff0000;">"{StaticResource GridLineStyle}"</span></span>
<span style="color: #009900;">                          <span style="color: #000066;">IsMarginEnabled</span>=<span style="color: #ff0000;">"False"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/chart:Chart.XAxis<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:Chart.YAxis<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #808080; font-style: italic;">&lt;!-- A Y axis with labels within the chart area --&gt;</span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:LinearAxis</span> <span style="color: #000066;">ShowLabels</span>=<span style="color: #ff0000;">"True"</span></span>
<span style="color: #009900;">                          <span style="color: #000066;">LabelsPosition</span>=<span style="color: #ff0000;">"Inside"</span></span>
<span style="color: #009900;">                          <span style="color: #000066;">GridlineStyle</span>=<span style="color: #ff0000;">"{StaticResource GridLineStyle}"</span></span>
<span style="color: #009900;">                          <span style="color: #000066;">ShowMajorTicks</span>=<span style="color: #ff0000;">"False"</span></span>
<span style="color: #009900;">                          <span style="color: #000066;">ShowMinorTicks</span>=<span style="color: #ff0000;">"False"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/chart:Chart.YAxis<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:Chart.Series<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #808080; font-style: italic;">&lt;!-- the series used to render the RGB components --&gt;</span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:LineSeries</span> <span style="color: #000066;">LineStroke</span>=<span style="color: #ff0000;">"#A00"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:LineSeries</span> <span style="color: #000066;">LineStroke</span>=<span style="color: #ff0000;">"#0A0"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;chart:LineSeries</span> <span style="color: #000066;">LineStroke</span>=<span style="color: #ff0000;">"#00A"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/chart:Chart.Series<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/chart:Chart<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"instructions"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"Use the mouse to 'drag' a line across the image below ..."</span></span>
<span style="color: #009900;">                <span style="color: #000066;">FontSize</span>=<span style="color: #ff0000;">"10"</span> <span style="color: #000066;">Foreground</span>=<span style="color: #ff0000;">"#333333"</span> <span style="color: #000066;">Margin</span>=<span style="color: #ff0000;">"50"</span> <span style="color: #000066;">TextWrapping</span>=<span style="color: #ff0000;">"Wrap"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Grid<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Grid</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"grid"</span></span>
<span style="color: #009900;">        <span style="color: #000066;">MouseLeftButtonUp</span>=<span style="color: #ff0000;">"Grid_MouseLeftButtonUp"</span></span>
<span style="color: #009900;">        <span style="color: #000066;">MouseLeftButtonDown</span>=<span style="color: #ff0000;">"Grid_MouseLeftButtonDown"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Image</span> <span style="color: #000066;">Width</span>=<span style="color: #ff0000;">"300"</span> <span style="color: #000066;">Height</span>=<span style="color: #ff0000;">"200"</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"image"</span>               </span>
<span style="color: #009900;">                    <span style="color: #000066;">Source</span>=<span style="color: #ff0000;">"/hare.jpg"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Line</span> <span style="color: #000066;">Stroke</span>=<span style="color: #ff0000;">"Black"</span> <span style="color: #000066;">StrokeThickness</span>=<span style="color: #ff0000;">"3"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"line"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Grid<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/StackPanel<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p>The above markup constructs a Chart, Image and a Line within a <code>StackPanel</code>. The code-behind loads the image into a <code>WriteableBitmap</code> in order to access its pixel values, and the mouse event handlers attached to the grid are used to detect when the user drags the line. The technique I published previously on <a href="{{ site.url }}/blog/colin/2010/06/throttling-silverlight-mouse-events-to-keep-the-ui-responsive/">throttling mouse events</a> is used to handle the mouse move event in order to construct the chart data:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> ThrottledEvent_ThrottledMouseMove<span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">object</span> sender, MouseEventArgs e<span style="color: #008000;">)</span>
<span style="color: #008000;">{</span>
  <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">(</span><span style="color: #008000;">!</span>lButtonDown<span style="color: #008000;">)</span>
    <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
&nbsp;
  line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span> <span style="color: #008000;">=</span> e<span style="color: #008000;">.</span><span style="color: #0000FF;">GetPosition</span><span style="color: #008000;">(</span>grid<span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">X</span><span style="color: #008000;">;</span>
  line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span> <span style="color: #008000;">=</span> e<span style="color: #008000;">.</span><span style="color: #0000FF;">GetPosition</span><span style="color: #008000;">(</span>grid<span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Y</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// compute distance between the points</span>
  <span style="color: #6666cc; font-weight: bold;">double</span> distance <span style="color: #008000;">=</span> Math<span style="color: #008000;">.</span><span style="color: #0000FF;">Sqrt</span><span style="color: #008000;">(</span><span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span><span style="color: #008000;">)</span> <span style="color: #008000;">+</span>
      <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// create the Visiblox dataseries for the R, G &amp; B components</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> dataR <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> DataSeries<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">double</span>, <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #666666;">"R"</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> dataG <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> DataSeries<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">double</span>, <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #666666;">"G"</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> dataB <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> DataSeries<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">double</span>, <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #666666;">"B"</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// build the charts</span>
  <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">double</span> pt <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> pt <span style="color: #008000;">&lt;</span> distance<span style="color: #008000;">;</span> pt<span style="color: #008000;">++</span><span style="color: #008000;">)</span>
  <span style="color: #008000;">{</span>
    <span style="color: #6666cc; font-weight: bold;">double</span> xPos <span style="color: #008000;">=</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span> <span style="color: #008000;">+</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> pt <span style="color: #008000;">/</span> distance<span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">double</span> yPos <span style="color: #008000;">=</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span> <span style="color: #008000;">+</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> pt <span style="color: #008000;">/</span> distance<span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #6666cc; font-weight: bold;">int</span> xIndex <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">)</span>xPos<span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">int</span> yIndex <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">)</span>yPos<span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #6666cc; font-weight: bold;">int</span> pixel <span style="color: #008000;">=</span> pixelData<span style="color: #008000;">[</span>xIndex <span style="color: #008000;">+</span> yIndex <span style="color: #008000;">*</span> <span style="color: #FF0000;">300</span><span style="color: #008000;">]</span><span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #008080; font-style: italic;">// the RGB values are 'packed' into an int, here we unpack them</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> B <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">)</span><span style="color: #008000;">(</span>pixel <span style="color: #008000;">&amp;</span> 0xFF<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    pixel <span style="color: #008000;">&gt;&gt;=</span> <span style="color: #FF0000;">8</span><span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> G <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">)</span><span style="color: #008000;">(</span>pixel <span style="color: #008000;">&amp;</span> 0xFF<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    pixel <span style="color: #008000;">&gt;&gt;=</span> <span style="color: #FF0000;">8</span><span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> R <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">)</span><span style="color: #008000;">(</span>pixel <span style="color: #008000;">&amp;</span> 0xFF<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    pixel <span style="color: #008000;">&gt;&gt;=</span> <span style="color: #FF0000;">8</span><span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #008080; font-style: italic;">// add each datapoint</span>
    dataR<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span><span style="color: #008000;">(</span><span style="color: #008000;">new</span> DataPoint<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">double</span>, <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span>pt, R<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    dataG<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span><span style="color: #008000;">(</span><span style="color: #008000;">new</span> DataPoint<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">double</span>, <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span>pt, G<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    dataB<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span><span style="color: #008000;">(</span><span style="color: #008000;">new</span> DataPoint<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">double</span>, <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span>pt, B<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">}</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// set the data for each series</span>
  chart<span style="color: #008000;">.</span><span style="color: #0000FF;">Series</span><span style="color: #008000;">[</span><span style="color: #FF0000;">0</span><span style="color: #008000;">]</span><span style="color: #008000;">.</span><span style="color: #0000FF;">DataSeries</span> <span style="color: #008000;">=</span> dataR<span style="color: #008000;">;</span>
  chart<span style="color: #008000;">.</span><span style="color: #0000FF;">Series</span><span style="color: #008000;">[</span><span style="color: #FF0000;">1</span><span style="color: #008000;">]</span><span style="color: #008000;">.</span><span style="color: #0000FF;">DataSeries</span> <span style="color: #008000;">=</span> dataG<span style="color: #008000;">;</span>
  chart<span style="color: #008000;">.</span><span style="color: #0000FF;">Series</span><span style="color: #008000;">[</span><span style="color: #FF0000;">2</span><span style="color: #008000;">]</span><span style="color: #008000;">.</span><span style="color: #0000FF;">DataSeries</span> <span style="color: #008000;">=</span> dataB<span style="color: #008000;">;</span>
<span style="color: #008000;">}</span></pre></td></tr></table></div><p>The Visiblox series (which implement <code>IChartSeries</code>) require date to be presented as an <code>IDataSeries</code>, which is a collection of <code>IDataPoint</code> instances. In the above code the chart data is copied directly into a <code>DataSeries</code>. Databinding is also possible via <code>BindableDataSeries</code>, however, for maximum performance it is always better to use <code>DataSeries</code> and copy the data across directly.</p><h2>Silverlight Toolkit Charts</h2><p>The Toolkit version of the application is much the same as the Visiblox one. The only difference in the application markup is for the chart itself, as shown below:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ControlTemplate</span> <span style="color: #000066;">x:Key</span>=<span style="color: #ff0000;">"SimplifiedDataPoint"</span> <span style="color: #000066;">TargetType</span>=<span style="color: #ff0000;">"tk:LineDataPoint"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ControlTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
...
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:Chart</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"chart"</span></span>
<span style="color: #009900;">          <span style="color: #000066;">LegendStyle</span>=<span style="color: #ff0000;">"{StaticResource CollapsedLegendStyle}"</span></span>
<span style="color: #009900;">          <span style="color: #000066;">TitleStyle</span>=<span style="color: #ff0000;">"{StaticResource CollapsedStyle}"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
&nbsp;
  <span style="color: #808080; font-style: italic;">&lt;!-- define the line series --&gt;</span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:LineSeries</span> <span style="color: #000066;">ItemsSource</span>=<span style="color: #ff0000;">"{Binding}"</span>   </span>
<span style="color: #009900;">                  <span style="color: #000066;">TransitionDuration</span>=<span style="color: #ff0000;">"0"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">DependentValueBinding</span>=<span style="color: #ff0000;">"{Binding Intensity}"</span> </span>
<span style="color: #009900;">                  <span style="color: #000066;">IndependentValueBinding</span>=<span style="color: #ff0000;">"{Binding Location}"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:LineSeries.DataPointStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Style</span> <span style="color: #000066;">TargetType</span>=<span style="color: #ff0000;">"tk:LineDataPoint"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Visibility"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"Collapsed"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Template"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"{StaticResource SimplifiedDataPoint}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Background"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"#A00"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Style<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:LineSeries.DataPointStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:LineSeries<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:LineSeries</span> <span style="color: #000066;">ItemsSource</span>=<span style="color: #ff0000;">"{Binding}"</span>   </span>
<span style="color: #009900;">                  <span style="color: #000066;">TransitionDuration</span>=<span style="color: #ff0000;">"0"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">DependentValueBinding</span>=<span style="color: #ff0000;">"{Binding Intensity}"</span> </span>
<span style="color: #009900;">                  <span style="color: #000066;">IndependentValueBinding</span>=<span style="color: #ff0000;">"{Binding Location}"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:LineSeries.DataPointStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Style</span> <span style="color: #000066;">TargetType</span>=<span style="color: #ff0000;">"tk:LineDataPoint"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Visibility"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"Collapsed"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Template"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"{StaticResource SimplifiedDataPoint}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Background"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"#0A0"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Style<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:LineSeries.DataPointStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:LineSeries<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:LineSeries</span> <span style="color: #000066;">ItemsSource</span>=<span style="color: #ff0000;">"{Binding}"</span>   </span>
<span style="color: #009900;">                  <span style="color: #000066;">TransitionDuration</span>=<span style="color: #ff0000;">"0"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">DependentValueBinding</span>=<span style="color: #ff0000;">"{Binding Intensity}"</span> </span>
<span style="color: #009900;">                  <span style="color: #000066;">IndependentValueBinding</span>=<span style="color: #ff0000;">"{Binding Location}"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:LineSeries.DataPointStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Style</span> <span style="color: #000066;">TargetType</span>=<span style="color: #ff0000;">"tk:LineDataPoint"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Visibility"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"Collapsed"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Template"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"{StaticResource SimplifiedDataPoint}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Background"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"#00A"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Style<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:LineSeries.DataPointStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:LineSeries<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
  <span style="color: #808080; font-style: italic;">&lt;!-- configure the axes --&gt;</span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:Chart.Axes<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tk:LinearAxis</span> <span style="color: #000066;">Orientation</span>=<span style="color: #ff0000;">"X"</span> <span style="color: #000066;">Height</span>=<span style="color: #ff0000;">"0"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:LinearAxis<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:Chart.Axes<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tk:Chart<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p>The markup here is a little more complex, in part because I am following the advice given by David Anson in his <a href="http://blogs.msdn.com/b/delay/archive/2010/01/13/i-feel-the-need-the-need-for-speed-seven-simple-performance-boosting-tweaks-for-common-silverlight-wpf-charting-scenarios.aspx">charting performance blog post</a> in order to maximise the chart performance. With reference to David’s post, the following tips have been implemented:</p><ol>
<li>Turn off the fade in/out VSM animations – the template used by the <code>DataPoint</code> in my example has no visual states, hence will not be animated</li>
<li>Change to a simpler <code>DataPoint</code> Template – the template in the example is as simple as possible, it is empty!</li>
<li>Add the points more efficiently – the <code>ItemsSource</code> for each series are being updated via an ‘atomic’ re-assignment.</li>
<li>Disable the data change animations – the <code>TransitionDuration</code> property has been set to zero as per David’s recommendation.</li>
</ol><p>The other three tips in the blog post were not relevant to this test scenario.</p><p>The code-behind for the Toolkit chart version of this application is again much the same as for the Visiblox charts, the main difference is due to the Toolkit chart binding to business objects rather than having its own series type. Here is the implementation of the (throttled) mouse move event handler, and the business object which is bound to the chart.</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #008080; font-style: italic;">/// &lt;summary&gt;</span>
<span style="color: #008080; font-style: italic;">/// Handles mouse move to draw the line and intensity histograms</span>
<span style="color: #008080; font-style: italic;">/// &lt;/summary&gt;</span>
<span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> ThrottledEvent_ThrottledMouseMove<span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">object</span> sender, MouseEventArgs e<span style="color: #008000;">)</span>
<span style="color: #008000;">{</span>
  <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">(</span><span style="color: #008000;">!</span>lButtonDown<span style="color: #008000;">)</span>
    <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
&nbsp;
  line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span> <span style="color: #008000;">=</span> e<span style="color: #008000;">.</span><span style="color: #0000FF;">GetPosition</span><span style="color: #008000;">(</span>grid<span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">X</span><span style="color: #008000;">;</span>
  line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span> <span style="color: #008000;">=</span> e<span style="color: #008000;">.</span><span style="color: #0000FF;">GetPosition</span><span style="color: #008000;">(</span>grid<span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Y</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// compute distance between the points</span>
  <span style="color: #6666cc; font-weight: bold;">double</span> distance <span style="color: #008000;">=</span> Math<span style="color: #008000;">.</span><span style="color: #0000FF;">Sqrt</span><span style="color: #008000;">(</span><span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span><span style="color: #008000;">)</span> <span style="color: #008000;">+</span>
      <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// create the series for the R, G &amp;amp; B components</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> dataR <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> List<span style="color: #008000;">&lt;</span>DataPoint<span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> dataG <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> List<span style="color: #008000;">&lt;</span>DataPoint<span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> dataB <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> List<span style="color: #008000;">&lt;</span>DataPoint<span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// build the charts</span>
  <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">double</span> pt <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> pt <span style="color: #008000;">&lt;</span> distance<span style="color: #008000;">;</span> pt<span style="color: #008000;">++</span><span style="color: #008000;">)</span>
  <span style="color: #008000;">{</span>
    <span style="color: #6666cc; font-weight: bold;">double</span> xPos <span style="color: #008000;">=</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span> <span style="color: #008000;">+</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">X2</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">X1</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> pt <span style="color: #008000;">/</span> distance<span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">double</span> yPos <span style="color: #008000;">=</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span> <span style="color: #008000;">+</span> <span style="color: #008000;">(</span>line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y2</span> <span style="color: #008000;">-</span> line<span style="color: #008000;">.</span><span style="color: #0000FF;">Y1</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> pt <span style="color: #008000;">/</span> distance<span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #6666cc; font-weight: bold;">int</span> xIndex <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">)</span>xPos<span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">int</span> yIndex <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">)</span>yPos<span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #6666cc; font-weight: bold;">int</span> pixel <span style="color: #008000;">=</span> pixelData<span style="color: #008000;">[</span>xIndex <span style="color: #008000;">+</span> yIndex <span style="color: #008000;">*</span> <span style="color: #FF0000;">300</span><span style="color: #008000;">]</span><span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #008080; font-style: italic;">// the RGB values are 'packed' into an int, here we unpack them</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> B <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">)</span><span style="color: #008000;">(</span>pixel <span style="color: #008000;">&amp;</span> 0xFF<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    pixel <span style="color: #008000;">&gt;&gt;=</span> <span style="color: #FF0000;">8</span><span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> G <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">)</span><span style="color: #008000;">(</span>pixel <span style="color: #008000;">&amp;</span> 0xFF<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    pixel <span style="color: #008000;">&gt;&gt;=</span> <span style="color: #FF0000;">8</span><span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> R <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">)</span><span style="color: #008000;">(</span>pixel <span style="color: #008000;">&amp;</span> 0xFF<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    pixel <span style="color: #008000;">&gt;&gt;=</span> <span style="color: #FF0000;">8</span><span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #008080; font-style: italic;">// add each datapoint to the series</span>
    dataR<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span><span style="color: #008000;">(</span><span style="color: #008000;">new</span> DataPoint<span style="color: #008000;">(</span>pt, R<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    dataG<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span><span style="color: #008000;">(</span><span style="color: #008000;">new</span> DataPoint<span style="color: #008000;">(</span>pt, G<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
    dataB<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span><span style="color: #008000;">(</span><span style="color: #008000;">new</span> DataPoint<span style="color: #008000;">(</span>pt, B<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">}</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">// add each series to the chart</span>
  <span style="color: #008000;">(</span><span style="color: #008000;">(</span>LineSeries<span style="color: #008000;">)</span>chart<span style="color: #008000;">.</span><span style="color: #0000FF;">Series</span><span style="color: #008000;">[</span><span style="color: #FF0000;">0</span><span style="color: #008000;">]</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ItemsSource</span> <span style="color: #008000;">=</span> dataR<span style="color: #008000;">;</span>
  <span style="color: #008000;">(</span><span style="color: #008000;">(</span>LineSeries<span style="color: #008000;">)</span>chart<span style="color: #008000;">.</span><span style="color: #0000FF;">Series</span><span style="color: #008000;">[</span><span style="color: #FF0000;">1</span><span style="color: #008000;">]</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ItemsSource</span> <span style="color: #008000;">=</span> dataG<span style="color: #008000;">;</span>
  <span style="color: #008000;">(</span><span style="color: #008000;">(</span>LineSeries<span style="color: #008000;">)</span>chart<span style="color: #008000;">.</span><span style="color: #0000FF;">Series</span><span style="color: #008000;">[</span><span style="color: #FF0000;">2</span><span style="color: #008000;">]</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ItemsSource</span> <span style="color: #008000;">=</span> dataB<span style="color: #008000;">;</span>
<span style="color: #008000;">}</span>
&nbsp;
<span style="color: #008000;">...</span>
&nbsp;
<span style="color: #008080; font-style: italic;">/// &lt;summary&gt;</span>
<span style="color: #008080; font-style: italic;">/// A value object used to present the data to the chart</span>
<span style="color: #008080; font-style: italic;">/// &lt;/summary&gt;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> DataPoint
<span style="color: #008000;">{</span>
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">double</span> Location <span style="color: #008000;">{</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">set</span><span style="color: #008000;">;</span> <span style="color: #008000;">}</span>
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">double</span> Intensity <span style="color: #008000;">{</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">set</span><span style="color: #008000;">;</span> <span style="color: #008000;">}</span>
&nbsp;
  <span style="color: #0600FF; font-weight: bold;">public</span> DataPoint<span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">double</span> location, <span style="color: #6666cc; font-weight: bold;">double</span> intensity<span style="color: #008000;">)</span>
  <span style="color: #008000;">{</span>
    Location <span style="color: #008000;">=</span> location<span style="color: #008000;">;</span>
    Intensity <span style="color: #008000;">=</span> intensity<span style="color: #008000;">;</span>
  <span style="color: #008000;">}</span>
<span style="color: #008000;">}</span></pre></td></tr></table></div><h2>Conclusions</h2><p>From the above example application we can see that the Visiblox charts performs approximately 50 – 100 times faster than the Silverlight Toolkit charts. This is of course a limited test that focuses on a specific mode of operation, however, the Visiblox charts have been designed with a focus on performance, so I would expect a similar result in other performance test cases.</p><p>The difference in speed between the two charting components can be broadly attributed to three key differences in design:</p><ol>
<li><strong>Lightweight visuals</strong> – as mentioned in the introduction, the Toolkit charts are ‘control’ heavy, pushing the limits of the framework guidelines, in order to provide flexible styling and templating. The Visiblox charts use a much more lightweight approach, however, if templating is required a TemplatedLineSeries can be used.</li>
<li><strong>Databinding as an option</strong> – with Visiblox it is possible to present the data directly to the chart using the DataSeries class, whilst with the Toolkit charts you have to use databinding which brings with it a performance overhead. Again, with Visiblox you can use databinding to business objects if you wish. With the above Visiblox example application the performance is approximately halved by using databinding, this is still 25-50 times faster than the toolkit charts! (The sourcecode download includes the databinding Visiblox vesion).</li>
<li><strong>Optimised handling of changes</strong> – the Visiblox charts are optimised in such a way as to minimise the impact of changes in the data or other properties of the chart. You can update datapoints, entire series, or change the various properties of an axis and be guaranteed that the chart will only re-computed its layout once.</li>
</ol><p>You can download the full sourcecode for the example applications given in this blog post here: <a href="{{ site.url }}/blog/colin/wp-content/uploads/2010/10/ChartPerformance.zip">ChartPerformance.zip</a></p><p>For the Visiblox examples you will need to visit <a href="http://www.visiblox.com/">www.visiblox.com</a> to download their chart component, and for the Toolkit examples you will need to download and install the <a href="http://silverlight.codeplex.com/">Silverlight Toolkit</a>.</p><p>Regards, Colin E.</p></div>