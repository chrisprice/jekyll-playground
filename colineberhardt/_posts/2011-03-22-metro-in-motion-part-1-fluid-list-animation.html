---
author: Colin Eberhardt
tags: codeproject, metro, Windows Phone 7, WP7
permalink: /blog/colin/2011/03/metro-in-motion-fluid-list-animation/index.html
layout: colineberhardt-blog
---
<div class="entry"><div class="topsy_widget_data topsy_theme_light-green" style="float: right; margin-left: 0.75em; background: url(data:,%7B%20%22url%22%3A%20%22http%253A%252F%252Fwww.scottlogic.co.uk%252Fblog%252Fcolin%252F2011%252F03%252Fmetro-in-motion-fluid-list-animation%252F%22%2C%20%22style%22%3A%20%22big%22%2C%20%22title%22%3A%20%22Metro%20In%20Motion%20Part%20%231%20-%20Fluid%20List%20Animation%20%23%22%20%7D);"></div><p><em>This blog post presents an attached behaviour that gracefully slides the contents of a list into view when used in conjunction with a Pivot control, emulating the Windows Phone 7 email application.</em></p><p>The Windows Phone 7 user interface is based on the <a href="http://en.wikipedia.org/wiki/Metro_Design_Language">Metro Design Language</a>, which favours clear typography, content over chrome and simplicity. If you want to see practical applications of the Metro approach to design, I would highly recommend visiting Scott Barnes’ blog over at <a href="http://www.riagenic.com/">riagenic</a>. </p><p><img src="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2011/03/metro.jpg" alt="" title="metro" width="500" height="357" class="aligncenter size-full wp-image-1316" /></p><p>Silverlight for Windows Phone 7 provides a basic Metro styling for elements such as Buttons and Checkboxes, it also has a few phone specific controls such as Pivot and Panorama. These controls make it easy to create a basic Metro interface, although again, I refer you to Scott Barnes’ blog, Metro is not all about black and white! However, when using a WP7 phone you will probably notice that the native applications, email, maps and settings, have a bit more ‘flair’, lists gracefully slide into view, or ‘peel’ off the screen when an item is selected. Metro is not just about static style, it is “alive in motion”. </p><p>The code in this blog post replicates the graceful slide effect seen in WP7 native applications when a moves from one list to another within a pivot as seen below. The code has been tested on real phone hardware to ensure that it performs well.</p><p><iframe title="YouTube video player" width="480" height="390" class="margin-left: auto; margin-right: auto;" src="http://www.youtube.com/embed/Ib4ijoYaTZo?rel=0" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p><p>To use this code set the attached property <code>ListAnimation.IsPivotAnimated</code> to true for the <code>ListBox</code> (or <code>ItemsControl</code>) contained within a <code>PivotItem</code>. Then apply the <code>ListAnimation.AnimationLevel</code> to any element which you wish to animate as the list slides into view. The animation level describes the delay before each element is animated, for example, the markup below causes the summary to slide in just after the title, with the date following behind.</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;controls:PivotItem</span> <span style="color: #000066;">Header</span>=<span style="color: #ff0000;">"BBC News"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #808080; font-style: italic;">&lt;!-- animating an ListBox --&gt;</span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ListBox</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"bbcNews"</span></span>
<span style="color: #009900;">        <span style="color: #000066;">local:ListAnimation.IsPivotAnimated</span>=<span style="color: #ff0000;">"True"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ListBox.ItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;StackPanel</span> <span style="color: #000066;">Orientation</span>=<span style="color: #ff0000;">"Vertical"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Title}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">Style</span>=<span style="color: #ff0000;">"{StaticResource PhoneTextLargeStyle}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Summary}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">Style</span>=<span style="color: #ff0000;">"{StaticResource PhoneTextSmallStyle}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">local:ListAnimation.AnimationLevel</span>=<span style="color: #ff0000;">"1"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Date}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">Style</span>=<span style="color: #ff0000;">"{StaticResource PhoneTextSmallStyle}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">local:ListAnimation.AnimationLevel</span>=<span style="color: #ff0000;">"2"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/StackPanel<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ListBox.ItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ListBox<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/controls:PivotItem<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p>The code that achieves this effect is relatively straightforward, so I am going to present it all in one go (omitting all the usual attached property boiler-plate code):</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #008080; font-style: italic;">// handles changes in the IsPivotAnimated attached property</span>
<span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> OnIsPivotAnimatedChanged<span style="color: #008000;">(</span>DependencyObject d,
                                                  DependencyPropertyChangedEventArgs args<span style="color: #008000;">)</span>
<span style="color: #008000;">{</span>
  ItemsControl list <span style="color: #008000;">=</span> d <span style="color: #0600FF; font-weight: bold;">as</span> ItemsControl<span style="color: #008000;">;</span>
&nbsp;
  list<span style="color: #008000;">.</span><span style="color: #0000FF;">Loaded</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">(</span>s2, e2<span style="color: #008000;">)</span> <span style="color: #008000;">=&gt;</span>
    <span style="color: #008000;">{</span>
      <span style="color: #008080; font-style: italic;">// locate the pivot control that this list is within</span>
      Pivot pivot <span style="color: #008000;">=</span> list<span style="color: #008000;">.</span><span style="color: #0000FF;">Ancestors</span><span style="color: #008000;">&lt;</span>Pivot<span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Single</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #0600FF; font-weight: bold;">as</span> Pivot<span style="color: #008000;">;</span>
&nbsp;
      <span style="color: #008080; font-style: italic;">// and its index within the pivot</span>
      <span style="color: #6666cc; font-weight: bold;">int</span> pivotIndex <span style="color: #008000;">=</span> pivot<span style="color: #008000;">.</span><span style="color: #0000FF;">Items</span><span style="color: #008000;">.</span><span style="color: #0000FF;">IndexOf</span><span style="color: #008000;">(</span>list<span style="color: #008000;">.</span><span style="color: #0000FF;">Ancestors</span><span style="color: #008000;">&lt;</span>PivotItem<span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Single</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
      <span style="color: #6666cc; font-weight: bold;">bool</span> selectionChanged <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
&nbsp;
      pivot<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectionChanged</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">(</span>s3, e3<span style="color: #008000;">)</span> <span style="color: #008000;">=&gt;</span>
        <span style="color: #008000;">{</span>
          selectionChanged <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">}</span><span style="color: #008000;">;</span>
&nbsp;
      <span style="color: #008080; font-style: italic;">// handle manipulation events which occur when the user</span>
      <span style="color: #008080; font-style: italic;">// moves between pivot items</span>
      pivot<span style="color: #008000;">.</span><span style="color: #0000FF;">ManipulationCompleted</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">(</span>s, e<span style="color: #008000;">)</span> <span style="color: #008000;">=&gt;</span>
        <span style="color: #008000;">{</span>
          <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">(</span><span style="color: #008000;">!</span>selectionChanged<span style="color: #008000;">)</span>
            <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
&nbsp;
          selectionChanged <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
&nbsp;
          <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">(</span>pivotIndex <span style="color: #008000;">!=</span> pivot<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectedIndex</span><span style="color: #008000;">)</span>
            <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
&nbsp;
          <span style="color: #008080; font-style: italic;">// determine which direction this tab will be scrolling in from</span>
          <span style="color: #6666cc; font-weight: bold;">bool</span> fromRight <span style="color: #008000;">=</span> e<span style="color: #008000;">.</span><span style="color: #0000FF;">TotalManipulation</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Translation</span><span style="color: #008000;">.</span><span style="color: #0000FF;">X</span> <span style="color: #008000;">&lt;=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span>
&nbsp;
          <span style="color: #008080; font-style: italic;">// locate the stack panel that hosts the items</span>
          VirtualizingStackPanel vsp <span style="color: #008000;">=</span> list<span style="color: #008000;">.</span><span style="color: #0000FF;">Descendants</span><span style="color: #008000;">&lt;</span>VirtualizingStackPanel<span style="color: #008000;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">First</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span>
                                                      <span style="color: #0600FF; font-weight: bold;">as</span> VirtualizingStackPanel<span style="color: #008000;">;</span>
&nbsp;
          <span style="color: #008080; font-style: italic;">// iterate over each of the items in view</span>
          <span style="color: #6666cc; font-weight: bold;">int</span> firstVisibleItem <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">)</span>vsp<span style="color: #008000;">.</span><span style="color: #0000FF;">VerticalOffset</span><span style="color: #008000;">;</span>
          <span style="color: #6666cc; font-weight: bold;">int</span> visibleItemCount <span style="color: #008000;">=</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">)</span>vsp<span style="color: #008000;">.</span><span style="color: #0000FF;">ViewportHeight</span><span style="color: #008000;">;</span>
          <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">int</span> index <span style="color: #008000;">=</span> firstVisibleItem<span style="color: #008000;">;</span> index <span style="color: #008000;">&lt;=</span> firstVisibleItem <span style="color: #008000;">+</span> visibleItemCount<span style="color: #008000;">;</span> index<span style="color: #008000;">++</span><span style="color: #008000;">)</span>
          <span style="color: #008000;">{</span>
            <span style="color: #008080; font-style: italic;">// find all the item that have the AnimationLevel attached property set</span>
            <span style="color: #0600FF; font-weight: bold;">var</span> lbi <span style="color: #008000;">=</span> list<span style="color: #008000;">.</span><span style="color: #0000FF;">ItemContainerGenerator</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ContainerFromIndex</span><span style="color: #008000;">(</span>index<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
            <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">(</span>lbi <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">)</span>
              <span style="color: #0600FF; font-weight: bold;">continue</span><span style="color: #008000;">;</span>
&nbsp;
            vsp<span style="color: #008000;">.</span><span style="color: #0000FF;">Dispatcher</span><span style="color: #008000;">.</span><span style="color: #0000FF;">BeginInvoke</span><span style="color: #008000;">(</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">=&gt;</span>
              <span style="color: #008000;">{</span>
                <span style="color: #0600FF; font-weight: bold;">var</span> animationTargets <span style="color: #008000;">=</span> lbi<span style="color: #008000;">.</span><span style="color: #0000FF;">Descendants</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span>
                                       <span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Where</span><span style="color: #008000;">(</span>p <span style="color: #008000;">=&gt;</span> ListAnimation<span style="color: #008000;">.</span><span style="color: #0000FF;">GetAnimationLevel</span><span style="color: #008000;">(</span>p<span style="color: #008000;">)</span> <span style="color: #008000;">&gt;</span> <span style="color: #008000;">-</span><span style="color: #FF0000;">1</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
                <span style="color: #0600FF; font-weight: bold;">foreach</span> <span style="color: #008000;">(</span>FrameworkElement target <span style="color: #0600FF; font-weight: bold;">in</span> animationTargets<span style="color: #008000;">)</span>
                <span style="color: #008000;">{</span>
                  <span style="color: #008080; font-style: italic;">// trigger the required animation</span>
                  GetAnimation<span style="color: #008000;">(</span>target, fromRight<span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Begin</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
                <span style="color: #008000;">}</span>
              <span style="color: #008000;">}</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
          <span style="color: #008000;">}</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">}</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">}</span><span style="color: #008000;">;</span>
<span style="color: #008000;">}</span></pre></td></tr></table></div><p>When the <code>IsPivotAnimated</code> property is first attached, <a href="{{ site.url }}/blog/colin/2010/03/linq-to-visual-tree/">Linq-to-VisualTree</a> is used to locate the parent <code>PivotControl</code> in order to handle <code>SelectionChanged</code> events. However, this is where things get tricky! If a <code>Pivot</code> control contains just two <code>PivotItems</code>, a change in selection is not enough to determine whether the pivot is scrolling to the left or the right! Therefore, we need to handle the <code>ManipulationCompleted</code> event that is fired after the <code>SelectionChanged</code> event to determine the direction of movement.</p><p>Once this is done, we can iterate over all of the items in the list, this assumes that the items are being hosted within a <code>VirtualizingStackPanel</code> which is true for a <code>ListBox</code>. For each item that is visible, another Linq query is used to find any that have the <code>AnimationLevel</code> attached property set on them. For each element the animation is created an fired.</p><p><code>Dispatcher.BeginInvoke</code> is used to start each group of animations in order to lessen the impact of starting 10-20 animations simultaneously. Without the use of the <code>Dispatcher</code>, when testing on real hardware there was a small, but noticeable, judder in the sideways scrolling of the Pivot control at the point where the animations were fired. The use of <code>Dispatcher.BeginInvoke</code> means that the construction and firing of the animations are now packaged as separate ‘tasks’ for each element in the list. This means that they do not have to be executed as a single unit of work, allowing the phone to fire a few animations, then perform other tasks. The net result is that the <code>Pivot</code> control still scrolls smoothly between the <code>PivotItems</code>.</p><p>The code which creates the required animation is given below, it simply adds a <code>TranslateTransform</code> to the element and creates the required animation / storyboard.</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #008080; font-style: italic;">/// &lt;summary&gt;</span>
<span style="color: #008080; font-style: italic;">/// Creates a TranslateTransform and associates it with the given element, returning</span>
<span style="color: #008080; font-style: italic;">/// a Storyboard which will animate the TranslateTransform with a SineEase function</span>
<span style="color: #008080; font-style: italic;">/// &lt;/summary&gt;</span>
<span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">static</span> Storyboard  GetAnimation<span style="color: #008000;">(</span>FrameworkElement element, <span style="color: #6666cc; font-weight: bold;">bool</span> fromRight<span style="color: #008000;">)</span>
<span style="color: #008000;">{</span>
  <span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">from</span> <span style="color: #008000;">=</span> fromRight <span style="color: #008000;">?</span> <span style="color: #FF0000;">80</span> <span style="color: #008000;">:</span> <span style="color: #008000;">-</span><span style="color: #FF0000;">80</span><span style="color: #008000;">;</span>
&nbsp;
  Storyboard sb<span style="color: #008000;">;</span>
  <span style="color: #6666cc; font-weight: bold;">double</span> delay <span style="color: #008000;">=</span> <span style="color: #008000;">(</span>ListAnimation<span style="color: #008000;">.</span><span style="color: #0000FF;">GetAnimationLevel</span><span style="color: #008000;">(</span>element<span style="color: #008000;">)</span><span style="color: #008000;">)</span> <span style="color: #008000;">*</span> <span style="color: #FF0000;">0.1</span> <span style="color: #008000;">+</span> <span style="color: #FF0000;">0.1</span><span style="color: #008000;">;</span>
&nbsp;
  TranslateTransform trans <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> TranslateTransform<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span> X <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">from</span> <span style="color: #008000;">}</span><span style="color: #008000;">;</span>
  element<span style="color: #008000;">.</span><span style="color: #0000FF;">RenderTransform</span> <span style="color: #008000;">=</span> trans<span style="color: #008000;">;</span>
&nbsp;
  sb <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> Storyboard<span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  sb<span style="color: #008000;">.</span><span style="color: #0000FF;">BeginTime</span> <span style="color: #008000;">=</span> TimeSpan<span style="color: #008000;">.</span><span style="color: #0000FF;">FromSeconds</span><span style="color: #008000;">(</span>delay<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
  DoubleAnimation db <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> DoubleAnimation<span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  db<span style="color: #008000;">.</span><span style="color: #0000FF;">To</span> <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span>
  db<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">From</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">from</span><span style="color: #008000;">;</span>
  db<span style="color: #008000;">.</span><span style="color: #0000FF;">EasingFunction</span> <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> SineEase<span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  sb<span style="color: #008000;">.</span><span style="color: #0000FF;">Duration</span> <span style="color: #008000;">=</span> db<span style="color: #008000;">.</span><span style="color: #0000FF;">Duration</span> <span style="color: #008000;">=</span> TimeSpan<span style="color: #008000;">.</span><span style="color: #0000FF;">FromSeconds</span><span style="color: #008000;">(</span><span style="color: #FF0000;">0.8</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  sb<span style="color: #008000;">.</span><span style="color: #0000FF;">Children</span><span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span><span style="color: #008000;">(</span>db<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  Storyboard<span style="color: #008000;">.</span><span style="color: #0000FF;">SetTarget</span><span style="color: #008000;">(</span>db, trans<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  Storyboard<span style="color: #008000;">.</span><span style="color: #0000FF;">SetTargetProperty</span><span style="color: #008000;">(</span>db, <span style="color: #008000;">new</span> PropertyPath<span style="color: #008000;">(</span><span style="color: #666666;">"X"</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #0600FF; font-weight: bold;">return</span> sb<span style="color: #008000;">;</span>
<span style="color: #008000;">}</span></pre></td></tr></table></div><p>Interestingly I tried using the <a href="http://artefactanimator.codeplex.com/">Artefact Animator</a>, which has a nice concise API for creating animations in code-behind. However, because it animates elements by setting properties directly, it does not perform well on Windows Phone 7, which can execute storyboards on the <a href="http://msdn.microsoft.com/en-us/library/ff967560%28VS.92%29.aspx">composition thread</a> in order to improve performance.</p><p>You can download the full sourcecode here: <a href="{{ site.url }}/blog/colin/wp-content/uploads/2011/03/ListAnimation.zip">ListAnimation.zip</a></p><p>Regards,<br />
Colin E.</p></div>