---
author: Colin Eberhardt
tags: codeproject, metro, sandwiches, WP7
permalink: /blog/colin/2011/05/metro-in-motion-5-sandwichflow/index.html
layout: colineberhardt-blog
---
<div class="entry"><div class="topsy_widget_data topsy_theme_light-green" style="float: right; margin-left: 0.75em; background: url(data:,%7B%20%22url%22%3A%20%22http%253A%252F%252Fwww.scottlogic.co.uk%252Fblog%252Fcolin%252F2011%252F05%252Fmetro-in-motion-5-sandwichflow%252F%22%2C%20%22style%22%3A%20%22big%22%2C%20%22title%22%3A%20%22Metro%20In%20Motion%20%235%20-%20SandwichFlow%20%23%22%20%7D);"></div><p>For the past few months I have been writing a Metro-In-Motion blog series which describes how to recreate some of the fluid effects found in native Windows Phone 7 applications within your own applications. So far I have covered <a href="{{ site.url }}/blog/colin/2011/03/metro-in-motion-fluid-list-animation/">fluid list animations</a>, <a href="{{ site.url }}/blog/colin/2011/03/metro-in-motion-part-2-peel-animations/">‘peel’ animations</a>, <a href="{{ site.url }}/blog/colin/2011/04/metro-in-motion-3-flying-titles/">flying titles</a> and a <a href="{{ site.url }}/blog/colin/2011/05/metro-in-motion-part-4-tilt-effect/">’tilt’ effect</a> – and now … I am all out of ideas!</p><p>The previous blog posts used a pretty simple little application to demonstrate their functionality, so I thought it might be fun to put these effects together within a more meaningful application. Rather than simply re-hashing an old idea, like a Twitter app, I decided to create something original, something inspiring, something which explores a subject area close to my heart – and stomache. This is how I came up with the (entirely original) SandwichFlow … an application for the sandwich aficionado!!!</p><p>SandwichFlow – As good as sandwiches get on a mobile … Brought to you by Team Distraction and ColinDoesIt(AsWell): </p><p><iframe width="640" height="510" src="http://www.youtube.com/embed/dBmXAhZyJ7I" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p><h2>Random Points Of Interest</h2><p>The important bits of this application are covered in the previous Metro-In_motion blog posts, so the following is just a random bunch of things that your might find interesting about this application:</p><h2>Recipe Thief</h2><p>The recipes were scraped from the fantastic <a href="http://www.bbc.co.uk/food/sandwich">BBC Food</a> web-pages, which are published in XHTML format, making it easy for me to grab the various component parts of each recipe. The scraped output was saved as an XML file which the application uses to build a view model using Linq to XML:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;">XDocument doc <span style="color: #008000;">=</span> XDocument<span style="color: #008000;">.</span><span style="color: #0000FF;">Parse</span><span style="color: #008000;">(</span>xml<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
Sandwiches <span style="color: #008000;">=</span> doc<span style="color: #008000;">.</span><span style="color: #0000FF;">Descendants</span><span style="color: #008000;">(</span><span style="color: #666666;">"sandwich"</span><span style="color: #008000;">)</span>
                <span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Select</span><span style="color: #008000;">(</span>el <span style="color: #008000;">=&gt;</span> <span style="color: #008000;">new</span> Sandwich<span style="color: #008000;">(</span><span style="color: #008000;">)</span>
                <span style="color: #008000;">{</span>
                  Title <span style="color: #008000;">=</span> el<span style="color: #008000;">.</span><span style="color: #0000FF;">Attribute</span><span style="color: #008000;">(</span><span style="color: #666666;">"title"</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Value</span>,
                  Id <span style="color: #008000;">=</span> id<span style="color: #008000;">++</span>,
                  Keywords <span style="color: #008000;">=</span> el<span style="color: #008000;">.</span><span style="color: #0000FF;">Descendants</span><span style="color: #008000;">(</span><span style="color: #666666;">"keyword"</span><span style="color: #008000;">)</span>
                                <span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Select</span><span style="color: #008000;">(</span>l <span style="color: #008000;">=&gt;</span> Regex<span style="color: #008000;">.</span><span style="color: #0000FF;">Replace</span><span style="color: #008000;">(</span>l<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Value</span>, <span style="color: #666666;">@"\b(\w)"</span>, m <span style="color: #008000;">=&gt;</span> m<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Value</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ToUpper</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span>                                      
                                <span style="color: #008000;">.</span><span style="color: #0000FF;">ToList</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span>,
                  Ingredients <span style="color: #008000;">=</span> el<span style="color: #008000;">.</span><span style="color: #0000FF;">Descendants</span><span style="color: #008000;">(</span><span style="color: #666666;">"ingredient"</span><span style="color: #008000;">)</span>
                                  <span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Select</span><span style="color: #008000;">(</span>l <span style="color: #008000;">=&gt;</span> l<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Value</span><span style="color: #008000;">)</span>
                                  <span style="color: #008000;">.</span><span style="color: #0000FF;">ToList</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span>,
                  Instructions <span style="color: #008000;">=</span> el<span style="color: #008000;">.</span><span style="color: #0000FF;">Descendants</span><span style="color: #008000;">(</span><span style="color: #666666;">"instruction"</span><span style="color: #008000;">)</span>
                                  <span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Select</span><span style="color: #008000;">(</span>l <span style="color: #008000;">=&gt;</span> <span style="color: #008000;">new</span> InstructionStep<span style="color: #008000;">(</span><span style="color: #008000;">)</span>
                                  <span style="color: #008000;">{</span>
                                    Text <span style="color: #008000;">=</span> l<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Value</span>,
                                    Step <span style="color: #008000;">=</span> l<span style="color: #008000;">.</span><span style="color: #0000FF;">ElementsBeforeSelf</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">+</span> <span style="color: #FF0000;">1</span>
                                  <span style="color: #008000;">}</span><span style="color: #008000;">)</span>
                                  <span style="color: #008000;">.</span><span style="color: #0000FF;">ToList</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span>
&nbsp;
                <span style="color: #008000;">}</span><span style="color: #008000;">)</span>
                <span style="color: #008000;">.</span><span style="color: #0000FF;">ToList</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span></pre></td></tr></table></div><h2>Jump then slide</h2><p>The front-page of the application uses the <a href="{{ site.url }}/blog/colin/2011/01/a-windows-phone-7-jump-list-control/">JumpList control</a> I wrote a few months back, with DataTemplates supplied for rending recipes or keywords that have the MetroInMotion.AnimationLevel property set on various elements so that they slide gracefully as the pivot control is animated from one item to the next:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DataTemplate</span> <span style="color: #000066;">x:Key</span>=<span style="color: #ff0000;">"SandwichTemplate"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;StackPanel</span> <span style="color: #000066;">Orientation</span>=<span style="color: #ff0000;">"Vertical"</span></span>
<span style="color: #009900;">              <span style="color: #000066;">Margin</span>=<span style="color: #ff0000;">"0,5,0,5"</span></span>
<span style="color: #009900;">              <span style="color: #000066;">mim:MetroInMotion.Tilt</span>=<span style="color: #ff0000;">"3"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span>  <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Title}"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">mim:MetroInMotion.AnimationLevel</span>=<span style="color: #ff0000;">"1"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Title"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">Foreground</span>=<span style="color: #ff0000;">"Black"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">FontSize</span>=<span style="color: #ff0000;">"{StaticResource PhoneFontSizeLarge}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding KeywordSummary}"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">mim:MetroInMotion.AnimationLevel</span>=<span style="color: #ff0000;">"2"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">FontSize</span>=<span style="color: #ff0000;">"{StaticResource PhoneFontSizeNormal}"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">Foreground</span>=<span style="color: #ff0000;">"#888"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/StackPanel<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><h2>Bring it back</h2><p>I originally added the background image to each page, then I realised a better place to put this is the application frame:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #008000;">&lt;</span>Style x<span style="color: #008000;">:</span>Key<span style="color: #008000;">=</span><span style="color: #666666;">"mainFrameStyle"</span>
    TargetType<span style="color: #008000;">=</span><span style="color: #666666;">"phone:PhoneApplicationFrame"</span><span style="color: #008000;">&gt;</span>
  <span style="color: #008000;">&lt;</span>Setter Property<span style="color: #008000;">=</span><span style="color: #666666;">"Template"</span><span style="color: #008000;">&gt;</span>
    <span style="color: #008000;">&lt;</span>Setter<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Value</span><span style="color: #008000;">&gt;</span>
      <span style="color: #008000;">&lt;</span>ControlTemplate TargetType<span style="color: #008000;">=</span><span style="color: #666666;">"phone:PhoneApplicationFrame"</span><span style="color: #008000;">&gt;</span>
        <span style="color: #008000;">&lt;</span>Grid Background<span style="color: #008000;">=</span><span style="color: #666666;">"White"</span><span style="color: #008000;">&gt;</span>
          <span style="color: #008000;">&lt;!--</span> background image <span style="color: #008000;">--&gt;</span>
          <span style="color: #008000;">&lt;</span>Image Source<span style="color: #008000;">=</span><span style="color: #666666;">"background.jpg"</span>
                HorizontalAlignment<span style="color: #008000;">=</span><span style="color: #666666;">"Stretch"</span>
                VerticalAlignment<span style="color: #008000;">=</span><span style="color: #666666;">"Stretch"</span><span style="color: #008000;">/&gt;</span>
          <span style="color: #008000;">&lt;</span>Border x<span style="color: #008000;">:</span>Name<span style="color: #008000;">=</span><span style="color: #666666;">"ClientArea"</span>
                  BorderBrush<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding BorderBrush}"</span>
                  BorderThickness<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding BorderThickness}"</span>
                  Background<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding Background}"</span>
                  HorizontalAlignment<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding HorizontalAlignment}"</span>
                  VerticalAlignment<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding VerticalAlignment}"</span><span style="color: #008000;">&gt;</span>
            <span style="color: #008000;">&lt;</span>ContentPresenter ContentTemplate<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding ContentTemplate}"</span>
                              Content<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding Content}"</span>
                              HorizontalAlignment<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding HorizontalContentAlignment}"</span>
                              Margin<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding Padding}"</span>
                              VerticalAlignment<span style="color: #008000;">=</span><span style="color: #666666;">"{TemplateBinding VerticalContentAlignment}"</span><span style="color: #008000;">/&gt;</span>
          <span style="color: #008000;">&lt;/</span>Border<span style="color: #008000;">&gt;</span>
        <span style="color: #008000;">&lt;/</span>Grid<span style="color: #008000;">&gt;</span>
      <span style="color: #008000;">&lt;/</span>ControlTemplate<span style="color: #008000;">&gt;</span>
    <span style="color: #008000;">&lt;/</span>Setter<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Value</span><span style="color: #008000;">&gt;</span>
  <span style="color: #008000;">&lt;/</span>Setter<span style="color: #008000;">&gt;</span>
<span style="color: #008000;">&lt;/</span>Style<span style="color: #008000;">&gt;</span></pre></td></tr></table></div><p>The application frame remains throughout the application lifetime, it hosts the currently displayed page. I have a feeling that the application frame is a little under-used. Rather than adding your application title to each page, why not add it to the frame?</p><h2>The same but different</h2><p>The code to find similar sandwiches uses an interesting Linq method which I have not used before, <code>Intersect</code>. It is always good to learn something new!</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #008080; font-style: italic;">// locate related sandwiches</span>
<span style="color: #0600FF; font-weight: bold;">foreach</span> <span style="color: #008000;">(</span><span style="color: #0600FF; font-weight: bold;">var</span> sandwich <span style="color: #0600FF; font-weight: bold;">in</span> Sandwiches<span style="color: #008000;">)</span>
<span style="color: #008000;">{</span>
  sandwich<span style="color: #008000;">.</span><span style="color: #0000FF;">Similar</span> <span style="color: #008000;">=</span> Sandwiches<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Where</span><span style="color: #008000;">(</span>s <span style="color: #008000;">=&gt;</span> s <span style="color: #008000;">!=</span> sandwich<span style="color: #008000;">)</span>
                      <span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Select</span><span style="color: #008000;">(</span>s <span style="color: #008000;">=&gt;</span>
                        <span style="color: #008000;">new</span>
                        <span style="color: #008000;">{</span>
                          Sandwich <span style="color: #008000;">=</span> s,
                          Score <span style="color: #008000;">=</span> KeywordCorrelation<span style="color: #008000;">(</span>s<span style="color: #008000;">.</span><span style="color: #0000FF;">Keywords</span>, sandwich<span style="color: #008000;">.</span><span style="color: #0000FF;">Keywords</span><span style="color: #008000;">)</span>
                        <span style="color: #008000;">}</span><span style="color: #008000;">)</span>
                      <span style="color: #008000;">.</span><span style="color: #0000FF;">OrderBy</span><span style="color: #008000;">(</span>s <span style="color: #008000;">=&gt;</span> s<span style="color: #008000;">.</span><span style="color: #0000FF;">Score</span><span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Reverse</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span>
                      <span style="color: #008000;">.</span><span style="color: #0000FF;">Take</span><span style="color: #008000;">(</span><span style="color: #FF0000;">5</span><span style="color: #008000;">)</span>
                      <span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Select</span><span style="color: #008000;">(</span>s <span style="color: #008000;">=&gt;</span> s<span style="color: #008000;">.</span><span style="color: #0000FF;">Sandwich</span><span style="color: #008000;">)</span>
                      <span style="color: #008000;">.</span><span style="color: #0000FF;">ToList</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
<span style="color: #008000;">}</span>
&nbsp;
<span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">double</span> KeywordCorrelation<span style="color: #008000;">(</span>List<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&gt;</span> keywordsOne, List<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&gt;</span> keywordsTwo<span style="color: #008000;">)</span>
<span style="color: #008000;">{</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> commonKeywords <span style="color: #008000;">=</span> keywordsOne<span style="color: #008000;">.</span><span style="color: #0000FF;">Intersect</span><span style="color: #008000;">(</span>keywordsTwo<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">var</span> allKeywords <span style="color: #008000;">=</span> keywordsOne<span style="color: #008000;">.</span><span style="color: #0000FF;">Union</span><span style="color: #008000;">(</span>keywordsTwo<span style="color: #008000;">)</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Distinct</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">)</span>commonKeywords<span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">/</span> <span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">)</span>allKeywords<span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span>
<span style="color: #008000;">}</span></pre></td></tr></table></div><p>The <code>KeywordCorrelation</code> methods finds the number of keywords that both sandwiches have in common, then divides this by the distinct collection of keywords for both sandwiches. Yummy.</p><h2>Slippery Ingredients</h2><p>When you view a recipe, the ingredients slide in from the right. I didn’t really have time to find images for all of the ingredients on the web, so each recipe has the ingredients of my favourite – the cheese and pickle sandwich. Each ingredient slides in using a storyboard, with their <code>BeginTime</code> staggered:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Image</span> <span style="color: #000066;">Source</span>=<span style="color: #ff0000;">"tom.png"</span></span>
<span style="color: #009900;">        <span style="color: #000066;">Margin</span>=<span style="color: #ff0000;">"150,70,0,0"</span></span>
<span style="color: #009900;">        <span style="color: #000066;">mim:MetroInMotion.AnimationLevel</span>=<span style="color: #ff0000;">"2"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Image.RenderTransform<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TranslateTransform</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"tomTrans"</span></span>
<span style="color: #009900;">                          <span style="color: #000066;">X</span>=<span style="color: #ff0000;">"400"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Image.RenderTransform<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Image.Triggers<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;EventTrigger</span> <span style="color: #000066;">RoutedEvent</span>=<span style="color: #ff0000;">"Image.Loaded"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;BeginStoryboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Storyboard</span> <span style="color: #000066;">BeginTime</span>=<span style="color: #ff0000;">"00:00:0.2"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DoubleAnimation</span> <span style="color: #000066;">Duration</span>=<span style="color: #ff0000;">"00:00:0.7"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetName</span>=<span style="color: #ff0000;">"tomTrans"</span> </span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetProperty</span>=<span style="color: #ff0000;">"X"</span> </span>
<span style="color: #009900;">                            <span style="color: #000066;">From</span>=<span style="color: #ff0000;">"400"</span> <span style="color: #000066;">To</span>=<span style="color: #ff0000;">"0"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DoubleAnimation.EasingFunction<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;SineEase</span> <span style="color: #000066;">EasingMode</span>=<span style="color: #ff0000;">"EaseOut"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/DoubleAnimation.EasingFunction<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/DoubleAnimation<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/BeginStoryboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/EventTrigger<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Image.Triggers<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Image<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p>They also have the <code>MetroInMotion.AnimationLevel</code> attached property set so that they slide with the pivot control. </p><p>You can grab the code here: <a href="{{ site.url }}/blog/colin/wp-content/uploads/2011/05/SandwichFlow.zip">SandwichFlow.zip</a></p><p>Regards, Colin E.<a href="{{ site.url }}/blog/colin/wp-content/uploads/2011/05/SplashScreenImage.jpg"><img src="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2011/05/SplashScreenImage.jpg" alt="" title="SplashScreenImage" width="480" height="800" class="aligncenter size-full wp-image-1499" /></a></p></div>