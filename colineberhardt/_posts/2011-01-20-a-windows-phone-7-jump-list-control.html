---
author: Colin Eberhardt
tags: Windows Phone 7
permalink: /blog/colin/2011/01/a-windows-phone-7-jump-list-control/index.html
layout: colineberhardt-blog
---
<div class="entry"><div class="topsy_widget_data topsy_theme_light-green" style="float: right; margin-left: 0.75em; background: url(data:,%7B%20%22url%22%3A%20%22http%253A%252F%252Fwww.scottlogic.co.uk%252Fblog%252Fcolin%252F2011%252F01%252Fa-windows-phone-7-jump-list-control%252F%22%2C%20%22style%22%3A%20%22big%22%2C%20%22title%22%3A%20%22A%20Windows%20Phone%207%20Jump%20List%20Control%20%23%22%20%7D);"></div><p><i>This blog post presents a Windows Phone 7 Jump List control that I have developed.This post describes the API in detail and includes full sourcecode. Feel free to use and enjoy!</i></p><p>The video below shows the control working on the emulator, the video further down this page shows it working on a real device. Full sourcecode is linked at the end of this article.</p><p><iframe title="YouTube video player" class="youtube-player" type="text/html" width="425" height="349" src="http://www.youtube.com/embed/hdd1bIdSA-g?rel=0" frameborder="0" allowfullscreen="allowFullScreen"></iframe></p><h2>Introduction</h2><p>For Silverlight developers Windows Phone 7 is a dream come true, a mobile platform that supports a language / framework they already know, or as Jesse Liberty puts it, “<a href="http://jesseliberty.com/2010/05/20/you-already-are-a-windows-phone-7-programmer/">You are already a Windows Phone Developer</a>“. What I find really cool about Silverlight for WP7 is that exactly the same controls can be used both on the web and the mobile. However, the controls for Windows Phone 7 are tailored specifically for the mobile form factor having larger areas to ‘hit’, and gestures for scrolling for example. Despite this, there are times when you really need a control that is specific to the mobile platform. </p><p>Navigating long lists of data is a chore on a mobile device. On the desktop / web you can click on the scrollbar and navigate the full length of the list with a single gesture, whereas navigating the same list on a mobile requires multiple swipe gestures. This is where a Jump List comes in handy!</p><p>A Jump List groups the items within the long list into categories. Clicking on a category heading (or jump button) opens up a category view, where you can then click on one of the other categories immediately causing the list to scroll to the start of this newly selected category.</p><p>This blog post describes the API of the Jump List control I have developed. A link to the full sourcecode and a demo application can be found at the end of this blog post.</p><p>The video below shows the JumpList working (and performing well!) on a Samsung Omnia WP7. Apologies for the poor video quality!</p><p><iframe title="YouTube video player" class="youtube-player" type="text/html" width="425" height="349" src="http://www.youtube.com/embed/jk7jUeNNSHU?rel=0" frameborder="0" allowfullscreen="allowFullScreen"></iframe></p><h2>Basic Example</h2><p>The API for the JumpList is quite similar to that of the ListBox, it has an ItemsSource property which you set (or bind) the collection of objects you wish to render in the list. The appearance of each item is specified by an ItemTemplate. The example below shows a JumpList bound to a collection of simple Person objects:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Person
<span style="color: #008000;">{</span>
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> Surname <span style="color: #008000;">{</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #0600FF; font-weight: bold;">set</span><span style="color: #008000;">;</span> <span style="color: #008000;">}</span>
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> Forename <span style="color: #008000;">{</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #0600FF; font-weight: bold;">set</span><span style="color: #008000;">;</span> <span style="color: #008000;">}</span>
<span style="color: #008000;">}</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// ItemsSource set in constructor of control ....</span>
list<span style="color: #008000;">.</span><span style="color: #0000FF;">ItemsSource</span> <span style="color: #008000;">=</span> PersonDataSource<span style="color: #008000;">.</span><span style="color: #0000FF;">CreateList</span><span style="color: #008000;">(</span><span style="color: #FF0000;">50</span><span style="color: #008000;">)</span><span style="color: #008000;">;</span></pre></td></tr></table></div><p>(As an aside, the PersonDataSource above generates<a href="http://www.siliconcommandergames.com/MarkovNameGenerator.htm"> pseudo-random names using Markov Chains</a> using some code I found online)</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"list"</span></span>
<span style="color: #009900;">            <span style="color: #000066;">ScrollDuration</span>=<span style="color: #ff0000;">"400"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
&nbsp;
  <span style="color: #808080; font-style: italic;">&lt;!-- category provider - details how the items are grouped --&gt;</span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList.CategoryProvider<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:AlphabetCategoryProvider</span> <span style="color: #000066;">PropertyName</span>=<span style="color: #ff0000;">"Surname"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList.CategoryProvider<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
  <span style="color: #808080; font-style: italic;">&lt;!-- item template - details how each item is rendered in the list --&gt;</span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList.ItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;StackPanel</span> <span style="color: #000066;">Orientation</span>=<span style="color: #ff0000;">"Horizontal"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">Margin</span>=<span style="color: #ff0000;">"0,3,0,3"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">Height</span>=<span style="color: #ff0000;">"40"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Image</span> <span style="color: #000066;">Source</span>=<span style="color: #ff0000;">"Head.png"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">Opacity</span>=<span style="color: #ff0000;">"0.7"</span></span>
<span style="color: #009900;">                <span style="color: #000066;">Width</span>=<span style="color: #ff0000;">"40"</span> <span style="color: #000066;">Height</span>=<span style="color: #ff0000;">"40"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Surname}"</span></span>
<span style="color: #009900;">                    <span style="color: #000066;">Margin</span>=<span style="color: #ff0000;">"3,0,0,0"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">", "</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Forename}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/StackPanel<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList.ItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p><img src="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2011/01/JumpListBasic.png" alt="" title="JumpListBasic" width="500" height="443" class="aligncenter size-full wp-image-1126" /></p><p>The main difference between the JumpList and a ListBox is that a JumpList requires that you supply a CategoryProvider. In the example above an AlphabetCategoryProvider was supplied which groups the supplied objects (in this case Person instances) based on the first letter of the property indicated by the PropertyName of the AlphabetCategoryProvider. In this example, the items are being grouped by the Surname property.</p><p>The animated scrolling as the list jumps from one category to the next can be controlled via the ScrollDuration property. The animated ‘reveal’ effect as the category buttons are drawn can be controlled via the CategoryTileAnimationDelay property which details the time between the animation being started for neighbouring category buttons. </p><p>Note, for very long lists with hundreds of items it makes sense to disable the scrolling effect as the list ‘jumps’ to the selected category. </p><p>The jump buttons that appear at the top of each group can be configured via properties that specify their style, template and item template. You can consult the API for more details. The category buttons which are rendered in the category view also have three similar properties. For example, you can use the JumpButtonStyle to make each button the same size, or the CategoryButtonStyle to create larger category buttons.</p><h2>Selection</h2><p>The JumpList exposes a SelectedItem property which can be used to get or set the currently selected item. This property also permits TwoWay binding to other controls or a View Model. The JumpList also exposes a SelectionChanged event which is fired whenever the SelectedItem property changed, this event is useful for more programmatic / non-databound usages.</p><p>The following code snippet shows a simple UI binding of the JumpList SelectedItem:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;StackPanel</span> <span style="color: #000066;">DataContext</span>=<span style="color: #ff0000;">"{Binding Path=SelectedItem, ElementName=list}"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"SELECTED ITEM:"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #808080; font-style: italic;">&lt;!-- displays the Name property of the object bound to the JumpList --&gt;</span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Name}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/StackPanel<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"list"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #808080; font-style: italic;">&lt;!-- ItemTemplate etc ... --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p>Each item within the JumpList is contained within a JumpListItem. When an item is selected, the default JumpList item template changes the Foreground colour to PhoneAccentBrush. It is possible to style and template the JumpListItems via the JumpListItemStyle property. The following example adds a Border element and sets the Background colour of this Border when an item is selected:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList.JumpListItemStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Style</span> <span style="color: #000066;">TargetType</span>=<span style="color: #ff0000;">"l:JumpListItem"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"BorderThickness"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"1"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Background"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"#222"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Padding"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"2"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Margin"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"0"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"HorizontalContentAlignment"</span> <span style="color: #000066;">Value</span>=<span style="color: #ff0000;">"Right"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter</span> <span style="color: #000066;">Property</span>=<span style="color: #ff0000;">"Template"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Setter.Value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ControlTemplate</span> <span style="color: #000066;">TargetType</span>=<span style="color: #ff0000;">"l:JumpListItem"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Border</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"LayoutRoot"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">Background</span>=<span style="color: #ff0000;">"{TemplateBinding Background}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">HorizontalAlignment</span>=<span style="color: #ff0000;">"{TemplateBinding HorizontalAlignment}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">VerticalAlignment</span>=<span style="color: #ff0000;">"{TemplateBinding VerticalAlignment}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">BorderBrush</span>=<span style="color: #ff0000;">"{TemplateBinding BorderBrush}"</span></span>
<span style="color: #009900;">                  <span style="color: #000066;">BorderThickness</span>=<span style="color: #ff0000;">"{TemplateBinding BorderThickness}"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualStateManager.VisualStateGroups<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualStateGroup</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"CommonStates"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
                <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Normal"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
                <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"MouseOver"</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
                <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Disabled"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualStateGroup<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualStateGroup</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"SelectionStates"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
                <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Unselected"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
                <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Selected"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
                  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
                    <span style="color: #808080; font-style: italic;">&lt;!-- change the background on selection --&gt;</span>
                    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ColorAnimation</span></span>
<span style="color: #009900;">                        <span style="color: #000066;">Storyboard.TargetName</span>=<span style="color: #ff0000;">"LayoutRoot"</span></span>
<span style="color: #009900;">                        <span style="color: #000066;">Storyboard.TargetProperty</span>=<span style="color: #ff0000;">"(Border.Background).(SolidColorBrush.Color)"</span></span>
<span style="color: #009900;">                        <span style="color: #000066;">To</span>=<span style="color: #ff0000;">"#555"</span></span>
<span style="color: #009900;">                        <span style="color: #000066;">Duration</span>=<span style="color: #ff0000;">"0:0:0.5"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
                    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ColorAnimation<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
                  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
                <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualState<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualStateGroup<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualStateManager.VisualStateGroups<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ContentControl</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"ContentContainer"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">VerticalContentAlignment</span>=<span style="color: #ff0000;">"{TemplateBinding VerticalContentAlignment}"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">HorizontalContentAlignment</span>=<span style="color: #ff0000;">"{TemplateBinding HorizontalContentAlignment}"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">Margin</span>=<span style="color: #ff0000;">"{TemplateBinding Padding}"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">Content</span>=<span style="color: #ff0000;">"{TemplateBinding Content}"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">ContentTemplate</span>=<span style="color: #ff0000;">"{TemplateBinding ContentTemplate}"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">Foreground</span>=<span style="color: #ff0000;">"{TemplateBinding Foreground}"</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Border<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ControlTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Setter.Value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Setter<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Style<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList.JumpListItemStyle<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p><img src="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2011/01/JumpListItemStyle.png" alt="" title="JumpListItemStyle" width="244" height="443" class="aligncenter size-full wp-image-1131" /></p><h2>The Category Provider</h2><p>As seen in the earlier example, the JumpList uses a category provider, specified via the JumpList.CategoryProvider property to place items into categories within the jump list. The CategoryProvider implements the following interface:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #008080; font-style: italic;">/// &lt;summary&gt;</span>
<span style="color: #008080; font-style: italic;">/// A category provider assigns items to categories and details</span>
<span style="color: #008080; font-style: italic;">/// the full category list for a set of items.</span>
<span style="color: #008080; font-style: italic;">/// &lt;/summary&gt;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">interface</span> ICategoryProvider
<span style="color: #008000;">{</span>
  <span style="color: #008080; font-style: italic;">/// &lt;summary&gt;</span>
  <span style="color: #008080; font-style: italic;">/// Gets the category for the given items</span>
  <span style="color: #008080; font-style: italic;">/// &lt;/summary&gt;</span>
  <span style="color: #6666cc; font-weight: bold;">object</span> GetCategoryForItem<span style="color: #008000;">(</span><span style="color: #6666cc; font-weight: bold;">object</span> item<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
&nbsp;
  <span style="color: #008080; font-style: italic;">/// &lt;summary&gt;</span>
  <span style="color: #008080; font-style: italic;">/// Gets the full list of categories for the given items.</span>
  <span style="color: #008080; font-style: italic;">/// &lt;/summary&gt;</span>
  List<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">object</span><span style="color: #008000;">&gt;</span> GetCategoryList<span style="color: #008000;">(</span>IEnumerable items<span style="color: #008000;">)</span><span style="color: #008000;">;</span>
<span style="color: #008000;">}</span></pre></td></tr></table></div><p>The GetCategoryForItem method is used to determine the category for each item in the list, whilst GetCategoryList returns the full list of categories in order to display the category view.</p><p>The JumpList comes with a couple of ‘built in’ category providers:</p><p>The AlphabetCategoryProvider uses the first letter of a named property to identify the category for each item. The category list which AlphabetCategoryProvider provides is always the full alphabet. The category view ‘grays’ category buttons for which the source list has no items.</p><p>The DistinctPropertyValueCategoryProvider is a slightly more generic provider, placing items into categories based on the value of the property nominated via PropertyName. With this provider the category list displays all the unique or distinct values found for the given property.</p><p>For example, if you have a list of events which you want to group by month, you can use a DistinctPropertyValueCategoryProvider identifying a property on your object which indicates the month. For example:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family: monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> JugglingEvent
<span style="color: #008000;">{</span>
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> Name <span style="color: #008000;">{</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #0600FF; font-weight: bold;">set</span><span style="color: #008000;">;</span> <span style="color: #008000;">}</span>
  <span style="color: #0600FF; font-weight: bold;">public</span> DateTime Date <span style="color: #008000;">{</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #0600FF; font-weight: bold;">set</span><span style="color: #008000;">;</span> <span style="color: #008000;">}</span>
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> Description <span style="color: #008000;">{</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #0600FF; font-weight: bold;">set</span><span style="color: #008000;">;</span> <span style="color: #008000;">}</span>
&nbsp;
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">int</span> Month
  <span style="color: #008000;">{</span>
    <span style="color: #0600FF; font-weight: bold;">get</span>
    <span style="color: #008000;">{</span>
      <span style="color: #0600FF; font-weight: bold;">return</span> Date<span style="color: #008000;">.</span><span style="color: #0000FF;">Month</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">}</span>
  <span style="color: #008000;">}</span>
<span style="color: #008000;">}</span></pre></td></tr></table></div><p>The category provider is detailed as follows:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #808080; font-style: italic;">&lt;!-- category provider groups by month--&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList.CategoryProvider<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:DistinctPropertyValueCategoryProvider</span></span>
<span style="color: #009900;">        <span style="color: #000066;">PropertyName</span>=<span style="color: #ff0000;">"Month"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList.CategoryProvider<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p>This will group the items by month. However, the Month property exposes an integer, and this will be supplied as the DataContext for the jump buttons and category buttons. In order to display the month indices as their respective strings, a value converter can be supplied to the jump button and category button item templates:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #808080; font-style: italic;">&lt;!-- the jump button template renders the month as a string --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList.JumpButtonItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Path=., Converter={StaticResource MonthIndexToStringConverter}}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList.JumpButtonItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
<span style="color: #808080; font-style: italic;">&lt;!-- the category template renders the month as a string --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList.CategoryButtonItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;TextBlock</span> <span style="color: #000066;">Text</span>=<span style="color: #ff0000;">"{Binding Path=., Converter={StaticResource MonthIndexToStringConverter}}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/DataTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList.CategoryButtonItemTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p><img src="http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2011/01/CategoryProviderExample.png" alt="" title="CategoryProviderExample" width="244" height="443" class="aligncenter size-full wp-image-1137" /></p><h2>Custom Category Button Animations</h2><p>When the category view is displayed, each category button is revealed via a storyboard. These storyboards are started sequentially with a delay, specified by the CategoryTileAnimationDelay property, between the start of neighbouring buttons.</p><p>The storyboards that define the animation are within the template of the category buttons. The JumpList control looks for two storyboards, name “ShowAnim” and “HideAnim”, and triggers these to show / hide the button respectively.</p><p>If you want to disable animations altogether, you can omit these storyboards. You can also specify your a custom animation by inserting your own storyboards into the category button template.</p><p>The example below adds a custom animation which reveals each button by rotating it around its centre:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #808080; font-style: italic;">&lt;!-- create a custom category button animation --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;l:JumpList.CategoryButtonTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ControlTemplate</span> <span style="color: #000066;">TargetType</span>=<span style="color: #ff0000;">"Button"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Grid</span> <span style="color: #000066;">Background</span>=<span style="color: #ff0000;">"Transparent"</span></span>
<span style="color: #009900;">        <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Parent"</span></span>
<span style="color: #009900;">        <span style="color: #000066;">RenderTransformOrigin</span>=<span style="color: #ff0000;">"0.5,0.5"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Grid.Resources<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Storyboard</span> <span style="color: #000066;">x:Key</span>=<span style="color: #ff0000;">"ShowAnim"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DoubleAnimation</span> <span style="color: #000066;">To</span>=<span style="color: #ff0000;">"0"</span> <span style="color: #000066;">Duration</span>=<span style="color: #ff0000;">"0:0:0.3"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetName</span>=<span style="color: #ff0000;">"Parent"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetProperty</span>=<span style="color: #ff0000;">"(Grid.Projection).(PlaneProjection.RotationX)"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Storyboard</span> <span style="color: #000066;">x:Key</span>=<span style="color: #ff0000;">"HideAnim"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DoubleAnimation</span> <span style="color: #000066;">To</span>=<span style="color: #ff0000;">"90"</span> <span style="color: #000066;">Duration</span>=<span style="color: #ff0000;">"0:0:0.1"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetName</span>=<span style="color: #ff0000;">"Parent"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetProperty</span>=<span style="color: #ff0000;">"(Grid.Projection).(PlaneProjection.RotationX)"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Grid.Resources<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Grid.Projection<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;PlaneProjection</span> <span style="color: #000066;">RotationX</span>=<span style="color: #ff0000;">"90"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Grid.Projection<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
&nbsp;
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualStateManager.VisualStateGroups<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualStateGroup</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"CommonStates"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Normal"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"MouseOver"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Pressed"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ColorAnimation</span> <span style="color: #000066;">To</span>=<span style="color: #ff0000;">"White"</span> <span style="color: #000066;">Duration</span>=<span style="color: #ff0000;">"0:0:0"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetName</span>=<span style="color: #ff0000;">"Background"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetProperty</span>=<span style="color: #ff0000;">"(Rectangle.Fill).(SolidColorBrush.Color)"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualState<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;VisualState</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Disabled"</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DoubleAnimation</span> <span style="color: #000066;">To</span>=<span style="color: #ff0000;">"1"</span> <span style="color: #000066;">Duration</span>=<span style="color: #ff0000;">"0:0:0"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetName</span>=<span style="color: #ff0000;">"DisabledBackground"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetProperty</span>=<span style="color: #ff0000;">"(Rectangle.Opacity)"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
              <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;DoubleAnimation</span> <span style="color: #000066;">To</span>=<span style="color: #ff0000;">"0"</span> <span style="color: #000066;">Duration</span>=<span style="color: #ff0000;">"0:0:0"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetName</span>=<span style="color: #ff0000;">"Background"</span></span>
<span style="color: #009900;">                            <span style="color: #000066;">Storyboard.TargetProperty</span>=<span style="color: #ff0000;">"(Rectangle.Opacity)"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Storyboard<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
          <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualState<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualStateGroup<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/VisualStateManager.VisualStateGroups<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Rectangle</span>  <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"Background"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">Fill</span>=<span style="color: #ff0000;">"{StaticResource PhoneAccentBrush}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Rectangle</span>  <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"DisabledBackground"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">Fill</span>=<span style="color: #ff0000;">"{StaticResource PhoneBackgroundBrush}"</span></span>
<span style="color: #009900;">                      <span style="color: #000066;">Opacity</span>=<span style="color: #ff0000;">"0"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ContentControl</span> <span style="color: #000066;">x:Name</span>=<span style="color: #ff0000;">"ContentContainer"</span></span>
<span style="color: #009900;">                    <span style="color: #000066;">Foreground</span>=<span style="color: #ff0000;">"{TemplateBinding Foreground}"</span></span>
<span style="color: #009900;">                    <span style="color: #000066;">HorizontalContentAlignment</span>=<span style="color: #ff0000;">"{TemplateBinding HorizontalContentAlignment}"</span></span>
<span style="color: #009900;">                    <span style="color: #000066;">VerticalContentAlignment</span>=<span style="color: #ff0000;">"{TemplateBinding VerticalContentAlignment}"</span></span>
<span style="color: #009900;">                    <span style="color: #000066;">Padding</span>=<span style="color: #ff0000;">"{TemplateBinding Padding}"</span></span>
<span style="color: #009900;">                    <span style="color: #000066;">Content</span>=<span style="color: #ff0000;">"{TemplateBinding Content}"</span></span>
<span style="color: #009900;">                    <span style="color: #000066;">ContentTemplate</span>=<span style="color: #ff0000;">"{TemplateBinding ContentTemplate}"</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Grid<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ControlTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/l:JumpList.CategoryButtonTemplate<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div><p>If you have many categories, and want to disable the ‘reveal’ animation, simply supply a template without any storyboards, see the demo sourcecode for an example.</p><p>You can download the full sourcecode: <a href="{{ site.url }}/blog/colin/wp-content/uploads/2011/01/WP7JumpList2.zip">WP7JumpList.zip</a></p><p>To run this code you will also need the <a href="http://silverlight.codeplex.com/releases/view/55034">Windows Phone 7 Toolkit</a>.</p><p>If you have any feedback, ideas or bugs to report – please let me know!</p><p>Regards, Colin E.</p></div>